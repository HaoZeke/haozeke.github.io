<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="[Rohit Goswami]"><meta name=description content="The road to accurate elementary intrinsic functions is paved with IEEE/ISO standards
Background Serialized update for the 2021 Google Summer of Code under the fortran-lang organization, mentored by Ondrej Certik.
Logistics Met with Ondrej daily from Sunday till Friday On Sunday we finished the compile time evaluation design (partially) Ondrej finished the rest overnight On Monday, we started co working on runtime implemenations Also added some more compile time stuff and pointers to clean things up Ondrej fixed a longstanding bug in the deserialise of serialized mod On Wednesday there was more scaffolding work done on the generics Added another implicit cast On Thursday we implemented an all fortran sin function Just as accurate as gfortran Compiles with LFortran Also fixed another serialization bug (floats were being truncated) On Friday we redesigned the runtime library Also discussed future plans and longterm goals Opened discussions around the runtime library and elementary function accuracy on the Zulip instance Considered adding fortran versions of LAMMPS (F77 and F90) to the compilation plans Overview This was most definitely my most productive week by far."><meta name=keywords content="personal,gsoc21,fortran,rambling"><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://rgoswami.me/posts/gsoc21-w10/><meta name=generator content="Wooframework"><title>GSoC21 W10: LFortran Runtime Library Design :: Rohit Goswami — Reflections
</title><link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css rel=stylesheet type=text/css><link rel=stylesheet href=/main.min.054e30538b054b321af6575a7659f551cec63e1cef6bbd674acccadf856d3aff.css><meta itemprop=name content="GSoC21 W10: LFortran Runtime Library Design"><meta itemprop=description content="The road to accurate elementary intrinsic functions is paved with IEEE/ISO standards
Background Serialized update for the 2021 Google Summer of Code under the fortran-lang organization, mentored by Ondrej Certik.
Logistics Met with Ondrej daily from Sunday till Friday On Sunday we finished the compile time evaluation design (partially) Ondrej finished the rest overnight On Monday, we started co working on runtime implemenations Also added some more compile time stuff and pointers to clean things up Ondrej fixed a longstanding bug in the deserialise of serialized mod On Wednesday there was more scaffolding work done on the generics Added another implicit cast On Thursday we implemented an all fortran sin function Just as accurate as gfortran Compiles with LFortran Also fixed another serialization bug (floats were being truncated) On Friday we redesigned the runtime library Also discussed future plans and longterm goals Opened discussions around the runtime library and elementary function accuracy on the Zulip instance Considered adding fortran versions of LAMMPS (F77 and F90) to the compilation plans Overview This was most definitely my most productive week by far."><meta itemprop=datePublished content="2021-08-14T00:28:00+00:00"><meta itemprop=dateModified content="2021-08-14T00:28:00+00:00"><meta itemprop=wordCount content="2178"><meta itemprop=image content="https://rgoswami.me/images/RG.png"><meta itemprop=keywords content="gsoc21,fortran,rambling,"><meta property="og:title" content="GSoC21 W10: LFortran Runtime Library Design"><meta property="og:description" content="The road to accurate elementary intrinsic functions is paved with IEEE/ISO standards
Background Serialized update for the 2021 Google Summer of Code under the fortran-lang organization, mentored by Ondrej Certik.
Logistics Met with Ondrej daily from Sunday till Friday On Sunday we finished the compile time evaluation design (partially) Ondrej finished the rest overnight On Monday, we started co working on runtime implemenations Also added some more compile time stuff and pointers to clean things up Ondrej fixed a longstanding bug in the deserialise of serialized mod On Wednesday there was more scaffolding work done on the generics Added another implicit cast On Thursday we implemented an all fortran sin function Just as accurate as gfortran Compiles with LFortran Also fixed another serialization bug (floats were being truncated) On Friday we redesigned the runtime library Also discussed future plans and longterm goals Opened discussions around the runtime library and elementary function accuracy on the Zulip instance Considered adding fortran versions of LAMMPS (F77 and F90) to the compilation plans Overview This was most definitely my most productive week by far."><meta property="og:type" content="article"><meta property="og:url" content="https://rgoswami.me/posts/gsoc21-w10/"><meta property="og:image" content="https://rgoswami.me/images/RG.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-08-14T00:28:00+00:00"><meta property="article:modified_time" content="2021-08-14T00:28:00+00:00"><meta property="og:see_also" content="https://rgoswami.me/posts/gsoc21-fin-reprot/"><meta property="og:see_also" content="https://rgoswami.me/posts/gsoc21-w9/"><meta property="og:see_also" content="https://rgoswami.me/posts/gsoc21-w8/"><meta property="og:see_also" content="https://rgoswami.me/posts/gsoc21-w7/"><meta property="og:see_also" content="https://rgoswami.me/posts/gsoc21-w6/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://rgoswami.me/images/RG.png"><meta name=twitter:title content="GSoC21 W10: LFortran Runtime Library Design"><meta name=twitter:description content="The road to accurate elementary intrinsic functions is paved with IEEE/ISO standards
Background Serialized update for the 2021 Google Summer of Code under the fortran-lang organization, mentored by Ondrej Certik.
Logistics Met with Ondrej daily from Sunday till Friday On Sunday we finished the compile time evaluation design (partially) Ondrej finished the rest overnight On Monday, we started co working on runtime implemenations Also added some more compile time stuff and pointers to clean things up Ondrej fixed a longstanding bug in the deserialise of serialized mod On Wednesday there was more scaffolding work done on the generics Added another implicit cast On Thursday we implemented an all fortran sin function Just as accurate as gfortran Compiles with LFortran Also fixed another serialization bug (floats were being truncated) On Friday we redesigned the runtime library Also discussed future plans and longterm goals Opened discussions around the runtime library and elementary function accuracy on the Zulip instance Considered adding fortran versions of LAMMPS (F77 and F90) to the compilation plans Overview This was most definitely my most productive week by far."><meta property="article:section" content="notes"><meta property="article:published_time" content="2021-08-14 00:28:00 +0000 UTC"></head><body class=dark-theme><div class=container><header class=header><div class=header__inner><div class=header__left><div class=logo><a href=/ style=text-decoration:none><img src=/images/home.png alt></a></div></div><div class=header__mid><button class=button><div class=button__text><a href=https://rgoswami.me//search>Search</a></div></button></div><div class=header__right><nav class=menu><ul class=menu__inner><li><a href=/about>About</a></li><li><a href=/posts>Blog</a></li><li><a href=/series>Series</a></li></ul><ul class=menu__inner><li><a href=/categories>Categories</a></li><li><a href=/snippets>Snippets</a></li><li><a href=/tags>Tags</a></li></ul></nav><button id=toggleMenu><div class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></div></button>
<button class=theme-toggle id=toggleTheme><svg class="theme-toggler" width="32" height="32" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></button></div></div></header><script src=/js/mathjax-config.js></script><script id=MathJax-script async src=https://unpkg.com/mathjax@3/es5/tex-chtml.js></script><aside class=sidebar><div class=hideTOC><button id=tocTog>TOC</button><div class="sideTOC m-fadeOut"><nav id=TableOfContents><ul><li><a href=#background>Background</a></li><li><a href=#logistics>Logistics</a></li><li><a href=#overview>Overview</a><ul><li><a href=#new-merge-requests>New Merge Requests</a></li><li><a href=#freshly-assigned-issues>Freshly Assigned Issues</a></li><li><a href=#additional-tasks>Additional Tasks</a></li></ul></li><li><a href=#misc-logs>Misc Logs</a><ul><li><a href=#items-to-fix>Items to fix</a></li><li><a href=#generic-proceedures>Generic Proceedures</a></li><li><a href=#fortran-runtime-intrinsics>Fortran Runtime Intrinsics</a></li></ul></li><li><a href=#trignometric-functions>Trignometric Functions</a><ul><li><a href=#brainstorming-sin>Brainstorming Sin</a></li></ul></li><li><a href=#sollya-and-function-approximations>Sollya and Function Approximations</a><ul><li><a href=#remez>Remez</a></li><li><a href=#taylor-and-chebyshev>Taylor and Chebyshev</a></li></ul></li><li><a href=#better-polynomials>Better Polynomials</a></li><li><a href=#rounding-errors>Rounding Errors</a></li><li><a href=#benchmarking-and-testing>Benchmarking and Testing</a></li><li><a href=#conclusions>Conclusions</a></li><li><a href=#references>References</a></li></ul></nav></div></div></aside><main class=post><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>11 minutes<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Written: 2021-08-14 00:28 +0000</p></p></div><article class=h-entry><h1 class="post-title p-name"><a class=u-url href=https://rgoswami.me/posts/gsoc21-w10/>GSoC21 W10: LFortran Runtime Library Design</a></h1><div class=post-info><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-pen-tool"><path d="M12 19l7-7 3 3-7 7-3-3z"/><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/><path d="M2 2l7.586 7.586"/><circle cx="11" cy="11" r="2"/></svg><span class="author u-author p-author"><a href=/author/rohit-goswami>Rohit Goswami</a></span></div><hr><aside id=toc class=sidebar><div class=toc-title>Table of Contents</div><nav id=TableOfContents><ul><li><a href=#background>Background</a></li><li><a href=#logistics>Logistics</a></li><li><a href=#overview>Overview</a><ul><li><a href=#new-merge-requests>New Merge Requests</a></li><li><a href=#freshly-assigned-issues>Freshly Assigned Issues</a></li><li><a href=#additional-tasks>Additional Tasks</a></li></ul></li><li><a href=#misc-logs>Misc Logs</a><ul><li><a href=#items-to-fix>Items to fix</a></li><li><a href=#generic-proceedures>Generic Proceedures</a></li><li><a href=#fortran-runtime-intrinsics>Fortran Runtime Intrinsics</a></li></ul></li><li><a href=#trignometric-functions>Trignometric Functions</a><ul><li><a href=#brainstorming-sin>Brainstorming Sin</a></li></ul></li><li><a href=#sollya-and-function-approximations>Sollya and Function Approximations</a><ul><li><a href=#remez>Remez</a></li><li><a href=#taylor-and-chebyshev>Taylor and Chebyshev</a></li></ul></li><li><a href=#better-polynomials>Better Polynomials</a></li><li><a href=#rounding-errors>Rounding Errors</a></li><li><a href=#benchmarking-and-testing>Benchmarking and Testing</a></li><li><a href=#conclusions>Conclusions</a></li><li><a href=#references>References</a></li></ul></nav></aside><hr><div class="post-content e-content"><div class="notice--info post-series-top"><p>This post is part of the &lt;a href="https://rgoswami.me/series/gsoc21-lfortran/">GSoC21: LFortran&lt;/a> series.</p></div><blockquote><p>The road to accurate elementary intrinsic functions is paved with
IEEE/ISO standards</p></blockquote><h2 id=background>Background</h2><p>Serialized update for the <a href=https://summerofcode.withgoogle.com/projects/#5790375215628288>2021 Google Summer of
Code</a>
under the <a href=https://fortran-lang.org/>fortran-lang organization</a>,
mentored by <a href=https://ondrejcertik.com/>Ondrej Certik</a>.</p><h2 id=logistics>Logistics</h2><ul><li>Met with Ondrej daily from Sunday till Friday<ul><li>On Sunday we finished the compile time evaluation design
(partially)<ul><li>Ondrej finished the rest overnight</li></ul></li><li>On Monday, we started co working on runtime implemenations<ul><li>Also added some more compile time stuff and pointers to
clean things up</li><li>Ondrej fixed a longstanding bug in the deserialise of
serialized mod</li></ul></li><li>On Wednesday there was more scaffolding work done on the
generics<ul><li>Added another implicit cast</li></ul></li><li>On Thursday we implemented an all fortran <code>sin</code> function<ul><li>Just as accurate as <code>gfortran</code></li><li>Compiles with LFortran</li><li>Also fixed another serialization bug (floats were being
truncated)</li></ul></li><li>On Friday we redesigned the runtime library<ul><li>Also discussed future plans and longterm goals</li><li>Opened discussions around the runtime library and elementary
function accuracy on the Zulip instance</li><li>Considered adding <code>fortran</code> versions of LAMMPS (F77 and F90)
to the compilation plans</li></ul></li></ul></li></ul><h2 id=overview>Overview</h2><p>This was most definitely my most productive week by far.</p><h3 id=new-merge-requests>New Merge Requests</h3><dl><dt><a href=https://gitlab.com/lfortran/lfortran/-/merge_requests/1113>llvm: More values when possible (1113)</a></dt><dd>Backend values from compile time evaluations</dd><dt><a href=https://gitlab.com/lfortran/lfortran/-/merge_requests/1132>kind: Compile time (1132)</a></dt><dd>A rather thorny refactor; but one with great benefits</dd><dt><a href=https://gitlab.com/lfortran/lfortran/-/merge_requests/1136>asr: Clean up extract_kind (1136)</a></dt><dd>Fruitful usage of the new functions</dd><dt><a href=https://gitlab.com/lfortran/lfortran/-/merge_requests/1114>Compile Time Intrinsic: Real (1114)</a></dt><dd>A <code>cast</code> based approach</dd><dt><a href=https://gitlab.com/lfortran/lfortran/-/merge_requests/1167>selected_kinds: Body visitors (1167)</a></dt><dd>Possibly my favorite MR, a nice pure <code>fortran</code> implementation backed
by a rough <code>sollya</code> approximation</dd><dt><a href=https://gitlab.com/lfortran/lfortran/-/merge_requests/1167>Initial sin implementation (1167)</a></dt><dd>Possibly my favorite MR, a nice pure <code>fortran</code> implementation backed
by a rough <code>sollya</code> approximation</dd><dt><a href=https://gitlab.com/lfortran/lfortran/-/merge_requests/1173>sin: Rework runtime to get better approximations (1173)</a></dt><dd>Possibly my favorite MR, a nice pure <code>fortran</code> implementation backed
by a rough <code>sollya</code> approximation</dd><dt><a href=https://gitlab.com/lfortran/lfortran/-/merge_requests/1176>Compile time floor (1176)</a></dt><dd>Fairly standard implementation requiring casts</dd><dt><a href=https://gitlab.com/lfortran/lfortran/-/merge_requests/1162>Integer2real (1162)</a></dt><dd>An implicit cast which had not previously been implement</dd><dt><a href=https://gitlab.com/lfortran/lfortran/-/merge_requests/1169>Compile time int (1169)</a></dt><dd>Along the lines of <code>real()</code></dd><dt><a href=https://gitlab.com/lfortran/lfortran/-/merge_requests/1194>Sincos tests (1194)</a></dt><dd>Benchmarking and setting up of the new test harness</dd></dl><h3 id=freshly-assigned-issues>Freshly Assigned Issues</h3><ul><li><a href=https://gitlab.com/lfortran/lfortran/-/issues/510>Semantics: Implement correct handling of PARAMETER
(510)</a></li><li><a href=https://gitlab.com/lfortran/lfortran/-/issues/507>ASR Pass: Order functions
(507)</a></li><li><a href=https://gitlab.com/lfortran/lfortran/-/issues/506>Semantics: Implement FLOOR (A [, KIND])
(506)</a></li><li><a href=https://gitlab.com/lfortran/lfortran/-/issues/504>Semantics: Implement MODULO (A, [, KIND])
(504)</a></li><li><a href=https://gitlab.com/lfortran/lfortran/-/issues/501>[RFC] Compile Time Intrinsic Design
(501)</a></li><li><a href=https://gitlab.com/lfortran/lfortran/-/issues/500>Strange Runtime issue with Implicit Casts
(500)</a></li><li><a href=https://gitlab.com/lfortran/lfortran/-/issues/499>Implicit cast for parameter
(499)</a></li><li><a href=https://gitlab.com/lfortran/lfortran/-/issues/494>Better handling of intrinsic module names
(494)</a></li></ul><h3 id=additional-tasks>Additional Tasks</h3><p>Will write a closing report for next week.</p><h2 id=misc-logs>Misc Logs</h2><p>This was a really packed week. Much of the discussion has already taken
place in the relevant issues and MRs; but some notes are in order for
posterity.</p><h3 id=items-to-fix>Items to fix</h3><ul><li>Some compile time function implementations are not standard
compliatn<ul><li><code>real</code></li></ul></li><li>Implicit casting rules fail for certain cases<ul><li>Notably for all <code>Arrays</code></li></ul></li></ul><p>Strange bug when intrinsic functions are called on implicit cast</p><h3 id=generic-proceedures>Generic Proceedures</h3><p>This was fun to work on.</p><h3 id=fortran-runtime-intrinsics>Fortran Runtime Intrinsics</h3><p>A long term goal is to have a dog-fooded runtime library. We zeroed in
on this design over on the wiki a few weeks ago. Now with generic
proceedures in; we&rsquo;ve begun implementing some of the intrinsic
functions.</p><h4 id=simple-functions>Simple Functions</h4><p>The simplest ones are of course trivial:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fortran data-lang=fortran><span class=line><span class=ln>1</span><span class=cl><span class=nb>abs</span><span class=w>
</span></span></span></code></pre></div><h4 id=trignometric-functions>Trignometric functions</h4><p>For more &ldquo;mathematical&rdquo; methods, we needed a template. One we found
which was compatible with our license is the <code>fdlibm</code> versions. Consider
for <code>sin</code>:</p><ul><li>We have <a href=https://www.netlib.org/fdlibm/s_sin.c>s_sin</a> and also
<a href=http://www.netlib.org/fdlibm/k_sin.c>k_sin</a><ul><li>Written in C and assembly</li></ul></li></ul><p>Older compilers are much more readable compared to the newer ones.</p><h2 id=trignometric-functions>Trignometric Functions</h2><p>The quote is motivated by my (limited) reading of two texts in the field
of implementing elementary functions, namely Muller
(<a href=#ref-mullerElementaryFunctions2016>2016</a>) and Muller et al.
(<a href=#ref-mullerHandbookFloatingPointArithmetic2018>2018</a>).</p><h3 id=brainstorming-sin>Brainstorming Sin</h3><ul><li><a href="https://gitlab.com/lfortran/lfortran/-/merge_requests/1167/diffs?commit_id=991f1c8ca5642b4e8ebbf9766405c3d06f897a28">This
and</a>
then the <a href="https://gitlab.com/lfortran/lfortran/-/merge_requests/1167/diffs?commit_id=8314a883925187d830492a6ea32bb4e6b6968daa">simpler version
here</a></li><li>Multiple interval based approximation used for <a href=https://github.com/amd/aocl-libm-ose/blob/4033e022da428125747e118ccd6fdd9cee21c470/src/optmized/sin.c>AMD&rsquo;s optimized
sin</a></li></ul><p>We were looking for a pedagogical, simple approach to calculating <code>sin</code>.
Unsurprisingly, the entire ecosystem of compilers seems to mostly follow
one implementation from the early 90s. Which is great, but Fortran
doesn&rsquo;t really implement IEEE 754&rsquo;s argument reduction routine (a.k.a.
<code>quadmath</code>). It turns out with a little massaging; the pedagogical
<a href="https://realtimecollisiondetection.net/blog/?p=9">approach presented in this blog post by Christer
Ericson</a> can be
adapted for use.</p><p>We needed to do slightly better. For starters, the errors of around
\(10^{-16}\) could be stomached, but not the ones around
\(10^{-10}\). Think of this as the same sort of problem as the
standard fitting of a potential energy surface.</p><p>How do we test these? Import from the intrinsic, and rename to a
different symbol, then run a loop.</p><h2 id=sollya-and-function-approximations>Sollya and Function Approximations</h2><p>Rather than go rooting around the annals of outdated compilers; and
instead of boldly copying from existing libraries; an interesting
approach is to calculate precise approximations including the Remez (or
minmax), Taylor approximations, and Chebyshev approximations.</p><p>Thankfully testing this is trivial with Sollya. Since it does nothave a
terminal inbuild we need <code>rlwrap</code> too.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>nix-shell -p sollya rlwrap
</span></span></code></pre></div><p>Consider a trial implementation:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fortran data-lang=fortran><span class=line><span class=ln> 1</span><span class=cl><span class=c>! lfortran_intrinsic_sin.f90
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=c></span><span class=k>module</span><span class=w> </span><span class=n>lfortran_intrinsic_sin</span><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w></span><span class=k>use</span><span class=p>,</span><span class=w> </span><span class=k>intrinsic</span><span class=w> </span><span class=kd>::</span><span class=w> </span><span class=n>iso_fortran_env</span><span class=p>,</span><span class=w> </span><span class=k>only</span><span class=p>:</span><span class=w> </span><span class=n>sp</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=n>real32</span><span class=p>,</span><span class=w> </span><span class=n>dp</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=n>real64</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w></span><span class=k>implicit</span><span class=w> </span><span class=k>none</span><span class=w>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=w></span><span class=k>interface</span><span class=w> </span><span class=nb>sin</span><span class=w>
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=w>    </span><span class=k>module</span><span class=w> </span><span class=k>procedure</span><span class=w> </span><span class=nb>dsin</span><span class=w>
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=w></span><span class=k>end</span><span class=w> </span><span class=k>interface</span><span class=w>
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=w></span><span class=k>contains</span><span class=w>
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=w></span><span class=k>elemental</span><span class=w> </span><span class=k>real</span><span class=p>(</span><span class=n>dp</span><span class=p>)</span><span class=w> </span><span class=k>function</span><span class=w> </span><span class=nb>dsin</span><span class=p>(</span><span class=n>x</span><span class=p>)</span><span class=w> </span><span class=k>result</span><span class=p>(</span><span class=n>r</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=w></span><span class=k>real</span><span class=p>(</span><span class=n>dp</span><span class=p>),</span><span class=w> </span><span class=k>parameter</span><span class=w> </span><span class=kd>::</span><span class=w> </span><span class=n>pi</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>3.1415926535897932384626433832795_dp</span><span class=w>
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=w></span><span class=k>real</span><span class=p>(</span><span class=n>dp</span><span class=p>),</span><span class=w> </span><span class=k>intent</span><span class=p>(</span><span class=n>in</span><span class=p>)</span><span class=w> </span><span class=kd>::</span><span class=w> </span><span class=n>x</span><span class=w>
</span></span></span><span class=line><span class=ln>15</span><span class=cl><span class=w></span><span class=k>real</span><span class=p>(</span><span class=n>dp</span><span class=p>)</span><span class=w> </span><span class=kd>::</span><span class=w> </span><span class=n>y</span><span class=w>
</span></span></span><span class=line><span class=ln>16</span><span class=cl><span class=w></span><span class=k>integer</span><span class=w> </span><span class=kd>::</span><span class=w> </span><span class=n>n</span><span class=w>
</span></span></span><span class=line><span class=ln>17</span><span class=cl><span class=w></span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nb>abs</span><span class=p>(</span><span class=n>x</span><span class=p>)</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>pi</span><span class=o>/</span><span class=mi>2</span><span class=p>)</span><span class=w> </span><span class=k>then</span><span class=w>
</span></span></span><span class=line><span class=ln>18</span><span class=cl><span class=w>    </span><span class=n>r</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>kernel_dsin</span><span class=p>(</span><span class=n>x</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln>19</span><span class=cl><span class=w></span><span class=k>else</span><span class=w> </span><span class=c>! fold to pi/2
</span></span></span><span class=line><span class=ln>20</span><span class=cl><span class=c>! https://realtimecollisiondetection.net/blog/?p=9
</span></span></span><span class=line><span class=ln>21</span><span class=cl><span class=c></span><span class=w>    </span><span class=n>y</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>modulo</span><span class=p>(</span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=o>*</span><span class=n>pi</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln>22</span><span class=cl><span class=w>    </span><span class=n>y</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>min</span><span class=p>(</span><span class=n>y</span><span class=p>,</span><span class=w> </span><span class=n>pi</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>y</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln>23</span><span class=cl><span class=w>    </span><span class=n>y</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>max</span><span class=p>(</span><span class=n>y</span><span class=p>,</span><span class=w> </span><span class=o>-</span><span class=n>pi</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>y</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln>24</span><span class=cl><span class=w>    </span><span class=n>y</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>min</span><span class=p>(</span><span class=n>y</span><span class=p>,</span><span class=w> </span><span class=n>pi</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>y</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln>25</span><span class=cl><span class=w>    </span><span class=n>r</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>kernel_dsin</span><span class=p>(</span><span class=n>y</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln>26</span><span class=cl><span class=w></span><span class=k>end</span><span class=w> </span><span class=k>if</span><span class=w>
</span></span></span><span class=line><span class=ln>27</span><span class=cl><span class=w></span><span class=k>end</span><span class=w> </span><span class=k>function</span><span class=w>
</span></span></span><span class=line><span class=ln>28</span><span class=cl><span class=w></span><span class=c>! Implement kernel_dsin with Sollya (read post)
</span></span></span></code></pre></div><p>The general approach to testing this is then:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fortran data-lang=fortran><span class=line><span class=ln> 1</span><span class=cl><span class=c>! test_sina.f90
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=c></span><span class=k>program</span><span class=w> </span><span class=n>main</span><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w>  </span><span class=k>use</span><span class=w> </span><span class=kd>::</span><span class=w> </span><span class=n>lfortran_intrinsic_sin</span><span class=p>,</span><span class=w> </span><span class=k>only</span><span class=p>:</span><span class=w> </span><span class=n>sin2</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=nb>dsin</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w>  </span><span class=k>real</span><span class=p>(</span><span class=nb>kind</span><span class=o>=</span><span class=mi>8</span><span class=p>)</span><span class=w> </span><span class=kd>::</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=w>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=w>  </span><span class=k>integer</span><span class=p>(</span><span class=nb>kind</span><span class=o>=</span><span class=mi>8</span><span class=p>)</span><span class=w> </span><span class=kd>::</span><span class=w> </span><span class=n>i</span><span class=w>
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=w>  </span><span class=k>do</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span><span class=mi>1000000</span><span class=w>
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=w>     </span><span class=n>y</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>real</span><span class=p>(</span><span class=n>i</span><span class=p>)</span><span class=o>/</span><span class=mi>10</span><span class=mf>0.0</span><span class=w>
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=w>     </span><span class=k>print</span><span class=o>*</span><span class=p>,</span><span class=w> </span><span class=n>y</span><span class=p>,</span><span class=w> </span><span class=nb>abs</span><span class=p>(</span><span class=nb>sin</span><span class=p>(</span><span class=n>y</span><span class=p>)</span><span class=o>-</span><span class=n>sin2</span><span class=p>(</span><span class=n>y</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=w>  </span><span class=k>end</span><span class=w> </span><span class=k>do</span><span class=w>
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=w></span><span class=k>end</span><span class=w> </span><span class=k>program</span><span class=w>
</span></span></span></code></pre></div><p>Which can be compiled with:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>gfortran -ffree-line-length-none lfortran_intrinsic_sin.f90 test_sina.f90 <span class=o>&amp;&amp;</span> ./a.out
</span></span></code></pre></div><p>Where the line length is important since we want to be able to copy and
paste expressions from Sollya.</p><h3 id=remez>Remez</h3><p>The test expressions can be generated as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>nix-shell -p sollya rlwrap
</span></span><span class=line><span class=ln>2</span><span class=cl>rlwrap -A sollya
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=nv>prec</span><span class=o>=</span>120<span class=p>;</span>
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=nv>f</span><span class=o>=</span>sin<span class=o>(</span>x<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=ln>5</span><span class=cl><span class=nv>d</span><span class=o>=[</span>-pi/2<span class=p>;</span>pi/2<span class=o>]</span><span class=p>;</span>
</span></span><span class=line><span class=ln>6</span><span class=cl><span class=nv>p</span><span class=o>=</span>remez<span class=o>(</span>f,16,d,default,1e-16,1e-30<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=ln>7</span><span class=cl>p<span class=p>;</span>
</span></span><span class=line><span class=ln>8</span><span class=cl>1.430896392112983438690712915149618875e-17 + x * <span class=o>(</span>0.9999999999999989714281994951487325976 + x * <span class=o>(</span>-3.349530544567829511297283045847078806e-16 + x * <span class=o>(</span>-0.1666666666666470131512533841331726124 + x * <span class=o>(</span>2.06038248351960358085265034956173799e-15 + x * <span class=o>(</span>8.33333333322297677610158866083573121e-3 + x * <span class=o>(</span>-5.200037492550081347598442689963074914e-15 + x * <span class=o>(</span>-1.984126981335937217532222096272076263e-4 + x * <span class=o>(</span>6.779661505197324337448766161086156236e-15 + x * <span class=o>(</span>2.755731547177283303366066506722157076e-6 + x * <span class=o>(</span>-4.994033469644991382509162854527493863e-15 + x * <span class=o>(</span>-2.505182167856013032537240066679691216e-8 + x * <span class=o>(</span>2.101039405474559290547827191709051192e-15 + x * <span class=o>(</span>1.604654097883256924434495617086734883e-10 + x * <span class=o>(</span>-4.71033700061518989435986419744537652e-16 + x * <span class=o>(</span>-7.356804698944816248097669067062646244e-13 + x * 4.36551332303930597866240036869066221e-17<span class=o>)))))))))))))))</span>
</span></span></code></pre></div><p>Where the signature of <code>remez</code> is
<code>func, degree, interval, default=1, quality=1e-5, bounds=[0;infty]</code>; Now
we can implement <code>kernel_dsin</code> as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fortran data-lang=fortran><span class=line><span class=ln>1</span><span class=cl><span class=k>elemental</span><span class=w> </span><span class=k>real</span><span class=p>(</span><span class=n>dp</span><span class=p>)</span><span class=w> </span><span class=k>function</span><span class=w> </span><span class=n>kernel_dsin</span><span class=p>(</span><span class=n>x</span><span class=p>)</span><span class=w> </span><span class=k>result</span><span class=p>(</span><span class=n>res</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=w>  </span><span class=k>real</span><span class=p>(</span><span class=n>dp</span><span class=p>),</span><span class=w> </span><span class=k>intent</span><span class=p>(</span><span class=n>in</span><span class=p>)</span><span class=w> </span><span class=kd>::</span><span class=w> </span><span class=n>x</span><span class=w>
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=w>  </span><span class=n>res</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>1.430896392112983438690712915149618875e-17_dp</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=mf>0.9999999999999989714281994951487325976_dp</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=o>-</span><span class=mf>3.349530544567829511297283045847078806e-16_dp</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=o>-</span><span class=mf>0.1666666666666470131512533841331726124_dp</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=mf>2.06038248351960358085265034956173799e-15_dp</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=mf>8.33333333322297677610158866083573121e-3_dp</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=o>-</span><span class=mf>5.200037492550081347598442689963074914e-15_dp</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=o>-</span><span class=mf>1.984126981335937217532222096272076263e-4_dp</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=mf>6.779661505197324337448766161086156236e-15_dp</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=mf>2.755731547177283303366066506722157076e-6_dp</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=o>-</span><span class=mf>4.994033469644991382509162854527493863e-15_dp</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=o>-</span><span class=mf>2.505182167856013032537240066679691216e-8_dp</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=mf>2.101039405474559290547827191709051192e-15_dp</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=mf>1.604654097883256924434495617086734883e-10_dp</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=o>-</span><span class=mf>4.71033700061518989435986419744537652e-16_dp</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=o>-</span><span class=mf>7.356804698944816248097669067062646244e-13_dp</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mf>4.36551332303930597866240036869066221e-17_dp</span><span class=p>)))))))))))))))</span><span class=w>
</span></span></span><span class=line><span class=ln>4</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln>5</span><span class=cl><span class=w></span><span class=k>end</span><span class=w> </span><span class=k>function</span><span class=w>
</span></span></span></code></pre></div><p>Note that we need to use double precision for the numbers, so we can
replace <code>SPACE+</code> with <code>_dpSPACE+</code>. We would like to also get some
statistics of the output, in <code>bash</code> just becuse we can <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>gfortran -ffree-line-length-none lfortran_intrinsic_sin.f90 test_sina.f90 <span class=o>&amp;&amp;</span> ./a.out &gt; remez16
</span></span><span class=line><span class=ln>2</span><span class=cl>awk <span class=s1>&#39;NR == 1 || $2 &lt; min {line = $0; min = $2}END{print line}&#39;</span> remez16
</span></span><span class=line><span class=ln>3</span><span class=cl>awk <span class=s1>&#39;NR == 1 || $2 &gt; max {line = $0; max = $2}END{print line}&#39;</span> remez16
</span></span></code></pre></div><h3 id=taylor-and-chebyshev>Taylor and Chebyshev</h3><p>To extract information from the &ldquo;certified&rdquo; functions in <code>Sollaya</code> we
need to remember that the return value is a list.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>nix-shell -p sollya rlwrap
</span></span><span class=line><span class=ln>2</span><span class=cl>rlwrap -A sollya
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=nv>prec</span><span class=o>=</span>120<span class=p>;</span>
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=nv>f</span><span class=o>=</span>sin<span class=o>(</span>x<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=ln>5</span><span class=cl><span class=nv>d</span><span class=o>=[</span>-pi/2<span class=p>;</span>pi/2<span class=o>]</span><span class=p>;</span>
</span></span><span class=line><span class=ln>6</span><span class=cl><span class=nv>p</span><span class=o>=</span>chebyshevform<span class=o>(</span>f,16,d<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=ln>7</span><span class=cl>p<span class=o>[</span>2<span class=o>]</span><span class=p>;</span>
</span></span><span class=line><span class=ln>8</span><span class=cl>p<span class=o>[</span>0<span class=o>]</span><span class=p>;</span>
</span></span><span class=line><span class=ln>9</span><span class=cl>quit<span class=p>;</span>
</span></span></code></pre></div><p>Similarly <code>taylorform</code> can be used to get Taylor series expansions.
Given that we know exactly what we want to generate; we can also simply
use <code>sollya</code> with an input script:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>sollya &lt; taylorform16
</span></span></code></pre></div><p>Where <code>taylorform16</code> contains:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl><span class=nv>f</span><span class=o>=</span>sin<span class=o>(</span>x<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=nv>d</span><span class=o>=[</span>-pi/2<span class=p>;</span>pi/2<span class=o>]</span><span class=p>;</span>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=nv>p</span><span class=o>=</span>taylorform<span class=o>(</span>f,16,d<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>p<span class=o>[</span>0<span class=o>]</span><span class=p>;</span>
</span></span></code></pre></div><p>This workflow can be easily extended into a script based runner.</p><h2 id=better-polynomials>Better Polynomials</h2><p>Some basic understanding of series expansions and / or visual inspection
would make it clear that for <code>sin</code> at-least; the odd terms are
essentially \(0\). <code>Sollya</code> can handle these; as described in Muller
(<a href=#ref-mullerElementaryFunctions2016>2016</a>). We opted to go the
rounding error route.</p><h2 id=rounding-errors>Rounding Errors</h2><p>With Ondrej, we were able to isolate the inaccuracy in our pure
<code>fortran</code> implementation and we realized it stemmed from the manner in
which our argument reduction is carried out. This is a well known
problem with attempted solutions from 1980s Payne and Hanek
(<a href=#ref-payneRadianReductionTrigonometric1983a>1983</a>) (including a
related implementation <a href=http://ftp.netbsd.org/pub/NetBSD/NetBSD-current/src/lib/libm/arch/vax/n_sincos.S>in
BSD</a>)<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>.
In particular, as per this <a href=https://www.csee.umbc.edu/~phatak/645/supl/Ng-ArgReduction.pdf>WG document of the SunPro
group</a>
Ng (<a href=#ref-ngArgumentReductionHuge2006>2006</a>) describing the cannonical
implementation; the error is actually from the division and difference.
This is also touched upon elsewhere in the literature, Brisebarre et al.
(<a href=#ref-brisebarreNewRangeReductionAlgorithm2005>2005</a>) and Defour et
al. (<a href=#ref-defourNewRangeReduction>n.d.</a>), along with Muller et al.
(<a href=#ref-mullerHandbookFloatingPointArithmetic2018>2018</a>) . Naturally one
of first places to check is the relevant <a href=http://www.open-std.org/JTC1/SC22/WG11/docs/n462.pdf>ISO draft standard on
elementary
functions</a>
(<a href=#ref-N462Pdf><strong>N462Pdf?</strong></a>) .</p><figure><img src=/ox-hugo/2021-08-13_13-18-16_screenshot.png alt="Figure 1: The ISO/IEC FCD 10967-2.4:1999(E) suggestion for sin"><figcaption><p><span class=figure-number>Figure 1: </span>The ISO/IEC FCD 10967-2.4:1999(E) suggestion for <code>sin</code></p></figcaption></figure><p>This isn&rsquo;t immediately actionable; but might be something for later.
Naturally the discussions here in context of IEEE 754
(<a href=#ref-IEEEStd754><strong>IEEEStd754?</strong></a>) (which the Fortran standard does
not fully support) and presumes basic knowledge of floating point
numbers Goldberg (<a href=#ref-goldbergWhatEveryComputer1991>1991</a>) . The
clearest explanation for requiring higher precision for some constants
in these reduction algorithms is given nicely by the draft standard:</p><blockquote><p>For reduction of an argument given in radians, implementations use one
or several approximate value(s) of π (or of a multiple of π), valid
to, say, n digits. The division implied in the argument reduction
cannot be valid to more than n digits, which implies a maximum
absolute angle value for which the reduction yields an accurate
reduced angle value.</p></blockquote><h2 id=benchmarking-and-testing>Benchmarking and Testing</h2><p>To make the benchmarking of new <code>lfortran</code> runtime intrinsic functions
as painless as the existing test runner framework; I ended up
implementing a new framework for these. Currently this takes different
compiler backends and a TOML file along with some <code>Jinja2</code> templates and
makes a <code>CMake</code> based project which is built and gives out a grid of
points along with the <code>gfortran</code> values and <code>abs</code> differences. Some
things to do there:</p><ul><li><input disabled type=checkbox> Plot things automatically</li><li><input disabled type=checkbox> Use non-uniform grids</li><li>Other QoL changes</li></ul><p>This is really easy to work with:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl><span class=nb>cd</span> src/runtime/pure/benchmarks
</span></span><span class=line><span class=ln>2</span><span class=cl>nix-shell -p <span class=s1>&#39;python38.withPackages(ps: with ps; [seaborn matplotlib click jinja2 tomli pandas])&#39;</span>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=c1># Or just micromamba install seaborn matplotlib pandas click jinja2 tomli</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>python gen_test.py --execute --build --compiler <span class=s2>&#34;gfortran&#34;</span>
</span></span></code></pre></div><p>The TOML file has simple naming rules:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=ln>1</span><span class=cl><span class=p>[[</span><span class=nx>trig</span><span class=p>]]</span> <span class=c># [name of lfortran_MODULE.f90]</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=nx>fname</span> <span class=p>=</span> <span class=s2>&#34;sin&#34;</span> <span class=c># Function to generate test for; must be the same as for gfortran</span>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=nx>only</span> <span class=p>=</span> <span class=s2>&#34;dsin&#34;</span> <span class=c># if not testing same function</span>
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=nx>range</span> <span class=p>=</span> <span class=mi>20</span> <span class=c># [-range, +range]</span>
</span></span><span class=line><span class=ln>5</span><span class=cl><span class=nx>stepsize</span> <span class=p>=</span> <span class=mf>0.01</span>
</span></span></code></pre></div><p>As does the template:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fortran data-lang=fortran><span class=line><span class=ln> 1</span><span class=cl><span class=k>program</span><span class=w> </span><span class=err>{{</span><span class=w> </span><span class=n>fname</span><span class=w> </span><span class=err>}}_</span><span class=n>test</span><span class=w>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=w>  </span><span class=k>use</span><span class=p>,</span><span class=w> </span><span class=k>intrinsic</span><span class=w> </span><span class=kd>::</span><span class=w> </span><span class=n>iso_fortran_env</span><span class=p>,</span><span class=w> </span><span class=k>only</span><span class=p>:</span><span class=w> </span><span class=n>sp</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=n>real32</span><span class=p>,</span><span class=w> </span><span class=n>dp</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=n>real64</span><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w>  </span><span class=k>use</span><span class=w> </span><span class=kd>::</span><span class=w> </span><span class=n>lfortran_intrinsic_trig</span><span class=p>,</span><span class=w> </span><span class=k>only</span><span class=p>:</span><span class=w> </span><span class=err>{{</span><span class=w> </span><span class=n>fname</span><span class=w> </span><span class=err>}}</span><span class=mi>2</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=err>{{</span><span class=w> </span><span class=n>fname</span><span class=w> </span><span class=err>}}</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w>  </span><span class=k>real</span><span class=p>(</span><span class=n>dp</span><span class=p>),</span><span class=w> </span><span class=k>parameter</span><span class=w> </span><span class=kd>::</span><span class=w> </span><span class=n>pi</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>3.1415926535897932384626433832795_dp</span><span class=w>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=w>  </span><span class=k>real</span><span class=p>(</span><span class=n>dp</span><span class=p>)</span><span class=w> </span><span class=kd>::</span><span class=w> </span><span class=n>ir</span><span class=p>,</span><span class=w> </span><span class=n>gf</span><span class=p>,</span><span class=w> </span><span class=n>lf</span><span class=w>
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=w>  </span><span class=k>print</span><span class=o>*</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;Compiled with {{ compiler  }}&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=w>  </span><span class=k>print</span><span class=o>*</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;x           &#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;gfortran_{{fname}}(x)           &#34;</span><span class=p>,</span><span class=w> </span><span class=p>&amp;</span><span class=w>
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=w>        </span><span class=s2>&#34;lfortran_{{fname}}(x)           &#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;abs_error           &#34;</span><span class=w>
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=w>  </span><span class=n>ir</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>-</span><span class=err>{{</span><span class=w> </span><span class=nb>range</span><span class=w> </span><span class=err>}}</span><span class=w>
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=w>  </span><span class=k>do</span><span class=w> </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>ir</span><span class=o>&lt;=</span><span class=err>{{</span><span class=w> </span><span class=nb>range</span><span class=w> </span><span class=err>}}</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=w>     </span><span class=n>gf</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>{{</span><span class=w> </span><span class=n>fname</span><span class=w> </span><span class=err>}}</span><span class=p>(</span><span class=n>ir</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=w>     </span><span class=n>lf</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>{{</span><span class=w> </span><span class=n>fname</span><span class=w> </span><span class=err>}}</span><span class=mi>2</span><span class=p>(</span><span class=n>ir</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=w>     </span><span class=k>print</span><span class=o>*</span><span class=p>,</span><span class=w> </span><span class=n>ir</span><span class=p>,</span><span class=w> </span><span class=n>gf</span><span class=p>,</span><span class=w> </span><span class=n>lf</span><span class=p>,</span><span class=w> </span><span class=nb>abs</span><span class=p>(</span><span class=n>gf</span><span class=o>-</span><span class=n>lf</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=w>     </span><span class=n>ir</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ir</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=err>{{</span><span class=w> </span><span class=n>stepsize</span><span class=w> </span><span class=err>}}</span><span class=w>
</span></span></span><span class=line><span class=ln>15</span><span class=cl><span class=w>  </span><span class=k>end</span><span class=w> </span><span class=k>do</span><span class=w>
</span></span></span><span class=line><span class=ln>16</span><span class=cl><span class=w></span><span class=k>end</span><span class=w> </span><span class=k>program</span><span class=w>
</span></span></span></code></pre></div><h2 id=conclusions>Conclusions</h2><p>Rather than move forward with the closing comments; and going into more
detail about the manner in which further <code>sollya</code> based polynomial
approximations are being looked into; I will end this post here; as a
trailer and invitation to the closing report. This has been the last of
the weekly updates. This doesn&rsquo;t mean anything will change other than
the format. I quite like keeping track of the work I do in this manner;
keeps me honest and not complacent <sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>. For those of you following
along; this has been a fun ride; for those who come to this in the
future; feel free to follow along from the beginning and drop comments
below.</p><h2 id=references>References</h2><div id=refs class="references csl-bib-body hanging-indent"><div id=ref-brisebarreNewRangeReductionAlgorithm2005 class=csl-entry><p>Brisebarre, Nicolas, David Defour, Peter Kornerup, and Jean-Michel
Muller. 2005. &ldquo;A New Range-Reduction Algorithm.&rdquo; <em>IEEE TRANSACTIONS ON
COMPUTERS</em> 54 (3): 9.</p></div><div id=ref-defourNewRangeReduction class=csl-entry><p>Defour, P David, Peter Kornerup, Jean-Michel Muller, and Nathalie Revol.
n.d. &ldquo;A New Range Reduction Algorithm,&rdquo; 13.</p></div><div id=ref-goldbergWhatEveryComputer1991 class=csl-entry><p>Goldberg, David. 1991. &ldquo;What Every Computer Scientist Should Know about
Floating-Point Arithmetic.&rdquo; <em>ACM Computing Surveys</em> 23 (1): 5&ndash;48.
<a href=https://doi.org/10.1145/103162.103163>https://doi.org/10.1145/103162.103163</a>.</p></div><div id=ref-mullerElementaryFunctions2016 class=csl-entry><p>Muller, Jean-Michel. 2016. <em>Elementary Functions</em>. Boston, MA:
Birkhäuser Boston. <a href=https://doi.org/10.1007/978-1-4899-7983-4>https://doi.org/10.1007/978-1-4899-7983-4</a>.</p></div><div id=ref-mullerHandbookFloatingPointArithmetic2018 class=csl-entry><p>Muller, Jean-Michel, Nicolas Brunie, Florent de Dinechin, Claude-Pierre
Jeannerod, Mioara Joldes, Vincent Lefèvre, Guillaume Melquiond, Nathalie
Revol, and Serge Torres. 2018. <em>Handbook of Floating-Point Arithmetic</em>.
Cham: Springer International Publishing.
<a href=https://doi.org/10.1007/978-3-319-76526-6>https://doi.org/10.1007/978-3-319-76526-6</a>.</p></div><div id=ref-ngArgumentReductionHuge2006 class=csl-entry><p>Ng, K C. 2006. &ldquo;Argument Reduction for Huge Arguments: Good to the Last
Bit.&rdquo;* Introduction*, 8.</p></div><div id=ref-payneRadianReductionTrigonometric1983a class=csl-entry><p>Payne, Mary H., and Robert N. Hanek. 1983. &ldquo;Radian Reduction for
Trigonometric Functions.&rdquo; <em>ACM SIGNUM Newsletter</em> 18 (1): 19&ndash;24.
<a href=https://doi.org/10.1145/1057600.1057602>https://doi.org/10.1145/1057600.1057602</a>.</p></div></div><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>From this <a href=https://stackoverflow.com/questions/13099202/awk-script-for-finding-smallest-value-from-column/13100039>stackoverflow
post</a>
of course&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>From this <a href=https://berthub.eu/articles/posts/help-my-sin-is-slow-and-my-fpu-is-inaccurate/>blog post by Bert
Hubert</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>I maintain similar notes for my research, but those sadly never
see the light of day&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><hr><div class=post-series-bottom><h2>Series info</h2><h3>GSoC21: LFortran series</h3><ol><li><a href=https://rgoswami.me/posts/gsoc21-w1/>GSoC21 W1: LFortran Kickoff</a></li><li><a href=https://rgoswami.me/posts/gsoc21-w2/>GSoC21 W2: LFortran Unraveling</a></li><li><a href=https://rgoswami.me/posts/gsoc21-w3/>GSoC21 W3: Kind, Characters, and Standards</a></li><li><a href=https://rgoswami.me/posts/gsoc21-w4/>GSoC21 W4: LFortran, Backends and Bugs</a></li><li><a href=https://rgoswami.me/posts/gsoc21-w5/>GSoC21 W5: LFortran Design Details and minidftatom</a></li><li><a href=https://rgoswami.me/posts/gsoc21-w6/>GSoC21 W6: LFortran ASR and Values</a></li><li><a href=https://rgoswami.me/posts/gsoc21-w7/>GSoC21 W7: LFortran Workflow Basics</a></li><li><a href=https://rgoswami.me/posts/gsoc21-w8/>GSoC21 W8: LFortran Refactors, and Compile Time Evaluations</a></li><li><a href=https://rgoswami.me/posts/gsoc21-w9/>GSoC21 W9: LFortran Bug Hunting Bonanza</a></li><li><b>GSoC21 W10: LFortran Runtime Library Design</b> &lt;-- You are here!</li><li><a href=https://rgoswami.me/posts/gsoc21-fin-reprot/>GSoC21 LFortran and Computational Chemistry</a></li></ol></div></div></article><hr><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=/tags/gsoc21>gsoc21</a></span><span class=tag><a href=/tags/fortran>fortran</a></span><span class=tag><a href=/tags/rambling>rambling</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>2178 Words</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Posted: <time class=dt-published>2021-08-14 00:28 +0000</time></p><a class=resp-sharing-button__link href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2frgoswami.me%2fposts%2fgsoc21-w10%2f" target=_blank rel=noopener aria-label=Facebook><div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--medium"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--circle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="11.5"/><path d="M15.84 9.5H13.5V8.48c0-.53.35-.65.6-.65h1.4v-2.3h-2.35c-2.3.0-2.65 1.7-2.65 2.8V9.5h-2v2h2v7h3v-7h2.1l.24-2z"/></svg></div>Facebook</div></a><a class=resp-sharing-button__link href="https://twitter.com/intent/tweet/?text=%22GSoC21%20W10%3a%20LFortran%20Runtime%20Library%20Design%22%20seems%20like%20an%20interesting%20read%20from%20%40rg0swami&amp;url=https%3a%2f%2frgoswami.me%2fposts%2fgsoc21-w10%2f" target=_blank rel=noopener aria-label=Twitter><div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--medium"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--circle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.5 7.4l-2 .2c-.4-.5-1-.8-2-.8C13.3 6.8 12 8 12 9.4v.6c-2 0-4-1-5.4-2.7-.2.4-.3.8-.3 1.3.0 1 .4 1.7 1.2 2.2-.5.0-1 0-1.2-.3.0 1.3 1 2.3 2 2.6-.3.4-.7.4-1 0 .2 1.4 1.2 2 2.3 2-1 1-2.5 1.4-4 1 1.3 1 2.7 1.4 4.2 1.4 4.8.0 7.5-4 7.5-7.5v-.4c.5-.4.8-1.5 1.2-2z"/><circle cx="12" cy="12" r="11.5"/></svg></div>Twitter</div></a><a class=resp-sharing-button__link href="mailto:?subject=%22GSoC21%20W10%3a%20LFortran%20Runtime%20Library%20Design%22%20seems%20interesting...&amp;body=https%3a%2f%2frgoswami.me%2fposts%2fgsoc21-w10%2f" target=_self rel=noopener aria-label=E-Mail><div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--medium"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--circle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.5 16c0 .8-.7 1.5-1.5 1.5H6c-.8.0-1.5-.7-1.5-1.5V8c0-.8.7-1.5 1.5-1.5h12c.8.0 1.5.7 1.5 1.5v8zm-2-7.5L12 13 6.5 8.5m11 6-4-2.5m-7 2.5 4-2.5"/><circle cx="12" cy="12" r="11.5"/></svg></div>E-Mail</div></a><a class=resp-sharing-button__link href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2frgoswami.me%2fposts%2fgsoc21-w10%2f&amp;title=%22GSoC21%20W10%3a%20LFortran%20Runtime%20Library%20Design%22%20seems%20interesting...&amp;summary=%22GSoC21%20W10%3a%20LFortran%20Runtime%20Library%20Design%22%20seems%20interesting...&amp;source=https%3a%2f%2frgoswami.me%2fposts%2fgsoc21-w10%2f" target=_blank rel=noopener aria-label=LinkedIn><div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--medium"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--circle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="11.5"/><path d="M15 12.5c-.28.0-.5.22-.5.5v3.5h-3s.03-6.48.0-7h3v.83s.46-.75 1.7-.75c1.56.0 2.3 1.12 2.3 3.3v3.62h-3V13c0-.28-.23-.5-.5-.5zm-7.5-3h2v7h-2z"/><circle cx="8.5" cy="6.5" r="1"/></svg></div>LinkedIn</div></a><a class=resp-sharing-button__link href="https://reddit.com/submit/?url=https%3a%2f%2frgoswami.me%2fposts%2fgsoc21-w10%2f&amp;resubmit=true&amp;title=%22GSoC21%20W10%3a%20LFortran%20Runtime%20Library%20Design%22%20seems%20interesting..." target=_blank rel=noopener aria-label=Reddit><div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--medium"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--circle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="11.5"/><ellipse cx="12" cy="14.37" rx="6.2" ry="4.24"/><path d="M14.3 16.25c-.62.36-1.42.57-2.3.57s-1.7-.2-2.32-.58"/><circle cx="14.61" cy="13.39" r=".98"/><circle cx="9.39" cy="13.39" r=".98"/><path d="M16.4 11.38c.26-.55.82-.92 1.47-.92.9.0 1.63.73 1.63 1.63.0.8-.6 1.47-1.38 1.6"/><circle cx="17.22" cy="7.52" r="1.63"/><path d="M7.6 11.38c-.26-.54-.82-.92-1.47-.92-.9.0-1.63.73-1.63 1.63.0.8.6 1.47 1.38 1.6M12 10.12s-.08-4.82 3.6-2.6"/></svg></div>Reddit</div></a><a class=resp-sharing-button__link href="whatsapp://send?text=%22GSoC21%20W10%3a%20LFortran%20Runtime%20Library%20Design%22%20seems%20interesting...%20https%3a%2f%2frgoswami.me%2fposts%2fgsoc21-w10%2f" target=_blank rel=noopener aria-label=WhatsApp><div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--medium"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--circle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle xmlns="http://www.w3.org/2000/svg" cx="12" cy="12" r="11.5"/><path stroke-width="1" d="M17.6 6.2c-1.5-1.5-3.4-2.3-5.5-2.3-4.3.0-7.8 3.5-7.8 7.8.0 1.4.4 2.7 1 3.9l-1.1 4 4.1-1.1c1.1.6 2.4.9 3.7.9 4.3.0 7.8-3.5 7.8-7.8.1-2-.7-3.9-2.2-5.4zm-5.5 11.9c-1.2.0-2.3-.3-3.3-.9l-.2-.1-2.4.6.7-2.4-.2-.2c-.6-1-1-2.2-1-3.4.0-3.6 2.9-6.5 6.5-6.5 1.7.0 3.3.7 4.6 1.9 1.2 1.2 1.9 2.8 1.9 4.6-.1 3.5-3 6.4-6.6 6.4zm3.5-4.8c-.2-.1-1.1-.6-1.3-.6-.2-.1-.3-.1-.4.1s-.5.6-.6.8c-.1.1-.2.1-.4.0s-.8-.3-1.6-1c-.6-.5-1-1.2-1.1-1.3-.1-.2.0-.3.1-.4l.3-.3s.1-.2.2-.3c.1-.1.0-.2.0-.3s-.4-1.1-.6-1.4c-.2-.4-.3-.3-.4-.3h-.4s-.3.0-.5.2-.7.7-.7 1.6c0 1 .7 1.9.8 2s1.4 2.1 3.3 2.9c.5.2.8.3 1.1.4.5.1.9.1 1.2.1.4-.1 1.1-.5 1.3-.9.2-.5.2-.8.1-.9.0-.2-.2-.3-.4-.4z"/></svg></div>WhatsApp</div></a></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://rgoswami.me/posts/gsoc21-fin-reprot/><span class=button__icon>←</span>
<span class=button__text>GSoC21 LFortran and Computational Chemistry</span>
</a></span><span class="button next"><a href=https://rgoswami.me/posts/tug-2021-meta/><span class=button__text>42nd Annual Confereence of the Tex Users Group</span>
<span class=button__icon>→</span></a></span></div></div><div id=comments class=thin><div class=pagination__title><span class=pagination__title-h>Comments</span><hr></div><script src=https://utteranc.es/client.js repo=haozeke/haozeke.github.io issue-term=pathname theme=photon-dark label="Utterance 💬" crossorigin=anonymous async></script></div></main><footer class=footer><p>&copy; 2023
<a href=/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a><br><a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a>.
Powered by <a href=http://gohugo.io><u>Hugo</u></a> and <a href=https://github.com/HaoZeke/hugo-theme-hello-friend-ng-hz><u>this theme</u></a>.</br>Hosted with <u><a href=https://www.netlify.com/>Netlify</a></u>.</br><script src=https://liberapay.com/rohit/widgets/button.js></script><noscript><a href=https://liberapay.com/rohit/donate><img alt="Donate using Liberapay" src=https://liberapay.com/assets/widgets/donate.svg></a></noscript></p></footer></div><script src=/bundle.min.5fae9992ea406007408dc33b0b3a8376d61e2f1d6ac50ba1dad7580ac50afb5199bcef3bbc3677e77553a9980bf882cf71edc2f755687dd7725f12ece4304ac2.js></script><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-109503488-16","auto"),ga("send","pageview")</script><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","3z2xvwqu4u")</script><script data-goatcounter=https://rgoswami.goatcounter.com/count async src=//gc.zgo.at/count.js></script><script>var clicky_site_ids=clicky_site_ids||[];clicky_site_ids.push("101265002")</script><script async src=https://static.getclicky.com/js></script><script src=https://cdn.jsdelivr.net/npm/readmore-js@3.0.0-beta-1/dist/readmore.min.js></script><script src=/js/codefold.min.f0790269b87613b3bcff64022840fe1991eee3ea384e874c78a24022c9936bd888a3c14a05a10955881eebb1558e4fcf37576dac120cd0bf4ebaf7aca27b35b1.js></script><script src=/js/copyClipboard.min.1c92539aea398296101add0e80508ad94cb59fb37f946f06ec9ca1c7558a961b8de0c5595a921aed70aa91eb94d24db35e5a01243bc625f8b1814b17928f478b.js></script></body></html>