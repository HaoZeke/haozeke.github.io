<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="[Rohit Goswami]"><meta name=description content="A post on configuring a user account for heavy interactive HPC usage with Spack, Nix and self-hosted applications.
Background I have in the past written a few posts about configuring my HPC setup. Since the Research and University Network of Iceland hf. (RHnet) recently recieved funding for a new machine, called Elja 1, I decided to jot down my notes from my setup as part of the user interaction team."><meta name=keywords content="personal,workflow,projects,hpc"><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://rgoswami.me/posts/hpc-conf-2021/><meta name=generator content="Wooframework"><title>HPC Configuration 2021 :: Rohit Goswami — Reflections
</title><link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css rel=stylesheet type=text/css><link rel=stylesheet href=/main.min.054e30538b054b321af6575a7659f551cec63e1cef6bbd674acccadf856d3aff.css><meta itemprop=name content="HPC Configuration 2021"><meta itemprop=description content="A post on configuring a user account for heavy interactive HPC usage with Spack, Nix and self-hosted applications.
Background I have in the past written a few posts about configuring my HPC setup. Since the Research and University Network of Iceland hf. (RHnet) recently recieved funding for a new machine, called Elja 1, I decided to jot down my notes from my setup as part of the user interaction team."><meta itemprop=datePublished content="2021-05-09T23:12:00+00:00"><meta itemprop=dateModified content="2021-05-09T23:12:00+00:00"><meta itemprop=wordCount content="1353"><meta itemprop=image content="https://rgoswami.me/images/RG.png"><meta itemprop=keywords content="workflow,projects,hpc,"><meta property="og:title" content="HPC Configuration 2021"><meta property="og:description" content="A post on configuring a user account for heavy interactive HPC usage with Spack, Nix and self-hosted applications.
Background I have in the past written a few posts about configuring my HPC setup. Since the Research and University Network of Iceland hf. (RHnet) recently recieved funding for a new machine, called Elja 1, I decided to jot down my notes from my setup as part of the user interaction team."><meta property="og:type" content="article"><meta property="og:url" content="https://rgoswami.me/posts/hpc-conf-2021/"><meta property="og:image" content="https://rgoswami.me/images/RG.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-05-09T23:12:00+00:00"><meta property="article:modified_time" content="2021-05-09T23:12:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://rgoswami.me/images/RG.png"><meta name=twitter:title content="HPC Configuration 2021"><meta name=twitter:description content="A post on configuring a user account for heavy interactive HPC usage with Spack, Nix and self-hosted applications.
Background I have in the past written a few posts about configuring my HPC setup. Since the Research and University Network of Iceland hf. (RHnet) recently recieved funding for a new machine, called Elja 1, I decided to jot down my notes from my setup as part of the user interaction team."><meta property="article:section" content="programming"><meta property="article:published_time" content="2021-05-09 23:12:00 +0000 UTC"></head><body class=dark-theme><div class=container><header class=header><div class=header__inner><div class=header__left><div class=logo><a href=/ style=text-decoration:none><img src=/images/home.png alt></a></div></div><div class=header__mid><button class=button><div class=button__text><a href=https://rgoswami.me//search>Search</a></div></button></div><div class=header__right><nav class=menu><ul class=menu__inner><li><a href=/about>About</a></li><li><a href=/posts>Blog</a></li><li><a href=/series>Series</a></li></ul><ul class=menu__inner><li><a href=/categories>Categories</a></li><li><a href=/snippets>Snippets</a></li><li><a href=/tags>Tags</a></li></ul></nav><button id=toggleMenu><div class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></div></button>
<button class=theme-toggle id=toggleTheme><svg class="theme-toggler" width="32" height="32" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></button></div></div></header><script src=/js/mathjax-config.js></script><script id=MathJax-script async src=https://unpkg.com/mathjax@3/es5/tex-chtml.js></script><aside class=sidebar><div class=hideTOC><button id=tocTog>TOC</button><div class="sideTOC m-fadeOut"><nav id=TableOfContents><ul><li><a href=#background>Background</a></li><li><a href=#rust-and-utilities>Rust and Utilities</a><ul><li><a href=#micromamba>MicroMamba</a></li><li><a href=#github-client>GitHub Client</a></li></ul></li><li><a href=#dotfiles>Dotfiles</a></li><li><a href=#spack>Spack</a><ul><li><a href=#environments>Environments</a></li><li><a href=#cleaning-modules>Cleaning Modules</a></li></ul></li><li><a href=#nix>Nix</a><ul><li><a href=#portable>Portable</a></li><li><a href=#mamba>Mamba</a></li><li><a href=#spack>Spack</a></li></ul></li><li><a href=#self-hosted-binaries>Self hosted binaries</a><ul><li><a href=#code-server>Code Server</a></li></ul></li><li><a href=#conclusions>Conclusions</a></li></ul></nav></div></div></aside><main class=post><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>7 minutes<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Written: 2021-05-09 23:12 +0000</p></p></div><article class=h-entry><h1 class="post-title p-name"><a class=u-url href=https://rgoswami.me/posts/hpc-conf-2021/>HPC Configuration 2021</a></h1><div class=post-info><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-pen-tool"><path d="M12 19l7-7 3 3-7 7-3-3z"/><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/><path d="M2 2l7.586 7.586"/><circle cx="11" cy="11" r="2"/></svg><span class="author u-author p-author"><a href=/author/rohit-goswami>Rohit Goswami</a></span></div><hr><aside id=toc class=sidebar><div class=toc-title>Table of Contents</div><nav id=TableOfContents><ul><li><a href=#background>Background</a></li><li><a href=#rust-and-utilities>Rust and Utilities</a><ul><li><a href=#micromamba>MicroMamba</a></li><li><a href=#github-client>GitHub Client</a></li></ul></li><li><a href=#dotfiles>Dotfiles</a></li><li><a href=#spack>Spack</a><ul><li><a href=#environments>Environments</a></li><li><a href=#cleaning-modules>Cleaning Modules</a></li></ul></li><li><a href=#nix>Nix</a><ul><li><a href=#portable>Portable</a></li><li><a href=#mamba>Mamba</a></li><li><a href=#spack>Spack</a></li></ul></li><li><a href=#self-hosted-binaries>Self hosted binaries</a><ul><li><a href=#code-server>Code Server</a></li></ul></li><li><a href=#conclusions>Conclusions</a></li></ul></nav></aside><hr><div class="post-content e-content"><blockquote><p>A post on configuring a user account for heavy interactive HPC usage with <code>Spack</code>,
<code>Nix</code> and self-hosted applications.</p></blockquote><h2 id=background>Background</h2><p>I have in the past written a few posts about configuring my HPC setup. Since the
<a href=https://www.rhnet.is/>Research and University Network of Iceland hf. (RHnet)</a> recently recieved funding
for a new machine, called Elja <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>, I decided to jot down my notes from
my setup as part of the user interaction team. Without abusing the ability to
bend the ear of the system administrators, I decided to document a user-facing
workflow. All the commands here assume an interactive session (example in
<code>slurm</code>):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl><span class=c1># 26 should be the number of processors on a node</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>srun -n <span class=m>26</span> --pty /bin/bash
</span></span></code></pre></div><h2 id=rust-and-utilities>Rust and Utilities</h2><p><code>rustup</code> is a fantastic way to get <code>cargo</code> up and running and immediately allows for the installation of many relevant command line utilities.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>curl --proto <span class=s1>&#39;=https&#39;</span> --tlsv1.2 -sSf https://sh.rustup.rs <span class=p>|</span> sh
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=nb>source</span> <span class=nv>$HOME</span>/.cargo/env
</span></span></code></pre></div><p>The ones I use mostly are enumerated in Table <a href=#table--tbl:rustalternates>1</a>.</p><p><a id=table--tbl:rustalternates></a></p><div class=table-caption><span class=table-number><a href=#table--tbl:rustalternates>Table 1</a>:</span>
Language bindings and tools</div><table><thead><tr><th>Utility</th><th>Rust Alternative</th><th>Rationale</th></tr></thead><tbody><tr><td><code>cat</code></td><td><a href=https://github.com/sharkdp/bat>bat</a></td><td>File reader with syntax highlighting</td></tr><tr><td><code>top</code></td><td><a href=https://github.com/clementtsang/bottom>bottom</a></td><td>Process management</td></tr><tr><td><code>ls</code></td><td><a href=https://github.com/ogham/exa>exa</a></td><td>Listing things with colors</td></tr><tr><td><code>ps</code></td><td><a href=https://github.com/dalance/procs>procs</a></td><td>Better looking process lists</td></tr><tr><td><code>grep</code></td><td><a href=https://github.com/BurntSushi/ripgrep>ripgrep</a></td><td>Search recursively</td></tr><tr><td><code>find</code></td><td><a href=https://github.com/sharkdp/fd>fd-find</a></td><td>Find things</td></tr><tr><td><code>sed</code></td><td><a href=https://github.com/chmln/sd>sd</a></td><td>Search and replace things</td></tr><tr><td><code>time</code></td><td><a href=https://github.com/sharkdp/hyperfine>hyperfine</a></td><td>Better benchmarking with stats</td></tr><tr><td><code>man</code></td><td><a href=https://github.com/dbrgn/tealdeer>tealdeer</a></td><td>A fast <code>tldr</code> page viewer</td></tr><tr><td><code>fzf</code></td><td><a href=https://github.com/lotabout/skim>skim</a></td><td>A fuzy finder</td></tr><tr><td>&ndash;</td><td><a href=https://github.com/denisidoro/navi>navi</a></td><td>Personalized cheatsheets</td></tr><tr><td><code>cd / z</code></td><td><a href=https://github.com/ajeetdsouza/zoxide>zoxide</a></td><td>Directory jumping aid</td></tr><tr><td><code>gibo</code></td><td>bliss</td><td><code>gitignore</code> generation utility</td></tr><tr><td><code>diff</code></td><td>delta</td><td>Nicer diffs</td></tr><tr><td><code>watch</code></td><td><a href=https://github.com/watchexec/watchexec>watchexec</a></td><td>Watch and execute</td></tr><tr><td><code>CTRL+R</code></td><td>mcfly</td><td>Reverse search</td></tr></tbody></table><p>These are trivial to obtain:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>cargo install bottom ripgrep hyperfine skim mcfly
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=c1># The following need some system libraries (OpenSSL) and shall be dealt with later, or with micromamba</span>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=c1># bat exa fd-find tealdeer starship sd procs zoxide bliss navi watchexec</span>
</span></span></code></pre></div><p>Not immediately obvious, but <a href=https://docs.rs/cargo-update/2.5.3/cargo_update/>easy to update</a> as well.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>cargo install cargo-update
</span></span><span class=line><span class=ln>2</span><span class=cl>cargo install-update --all
</span></span></code></pre></div><h3 id=micromamba>MicroMamba</h3><p>We will set up a <code>micromamba</code> installation to get <code>git</code> and other base utilities.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>mkdir -p ~/.local/bin
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=nb>export</span> <span class=nv>PATH</span><span class=o>=</span><span class=nv>$HOME</span>/.local/bin:<span class=nv>$PATH</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>wget -qO- https://micromamba.snakepit.net/api/micromamba/linux-64/latest <span class=p>|</span> tar -xvj bin/micromamba
</span></span><span class=line><span class=ln>4</span><span class=cl>mv bin/micromamba ~/.local/bin
</span></span><span class=line><span class=ln>5</span><span class=cl>rm -rf bin
</span></span><span class=line><span class=ln>6</span><span class=cl>micromamba shell init -s bash -p <span class=nv>$HOME</span>/.micromamba
</span></span><span class=line><span class=ln>7</span><span class=cl>. ~/.bashrc
</span></span></code></pre></div><p>Now we can use <code>mamba</code> to get a temporary interactive environment.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl><span class=c1># Spack requirements</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=nv>PKGS</span><span class=o>=</span><span class=s2>&#34;git patch curl make tar gzip unzip bzip2 xz zstd subversion lsof m4 openssl pkg-config&#34;</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>mkdir ~/.mamba_venvs
</span></span><span class=line><span class=ln>4</span><span class=cl>micromamba create -p ~/.mamba_venvs/intBase <span class=nv>$PKGS</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>micromamba activate ~/.mamba_venvs/intBase
</span></span></code></pre></div><p>What we need <code>micromamba</code> for is really the <code>openssl</code> library.</p><h4 id=configuration>Configuration</h4><p>A simple <code>.condarc</code> will suffice for the above.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln>1</span><span class=cl><span class=nt>channels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=w>  </span>- <span class=l>conda-forge</span><span class=w>
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=w>  </span>- <span class=l>defaults</span><span class=w>
</span></span></span><span class=line><span class=ln>4</span><span class=cl><span class=w></span><span class=nt>channel_priority</span><span class=p>:</span><span class=w> </span><span class=l>disabled</span><span class=w>
</span></span></span></code></pre></div><h3 id=github-client>GitHub Client</h3><p>We can grab the <a href=https://github.com/cli/cli/>GitHub client binary</a> for interacting with GitHub for now. Configuring and using this spares the necessity of explaining SSH authentication.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln> 1</span><span class=cl><span class=nv>ghcliVer</span><span class=o>=</span>1.13.1
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=nv>DST</span><span class=o>=</span>~/.local
</span></span><span class=line><span class=ln> 3</span><span class=cl>wget https://github.com/cli/cli/releases/download/v<span class=si>${</span><span class=nv>ghcliVer</span><span class=si>}</span>/gh_<span class=si>${</span><span class=nv>ghcliVer</span><span class=si>}</span>_linux_amd64.tar.gz
</span></span><span class=line><span class=ln> 4</span><span class=cl>tar xf <span class=s2>&#34;gh_</span><span class=si>${</span><span class=nv>ghcliVer</span><span class=si>}</span><span class=s2>_linux_amd64.tar.gz&#34;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>mkdir -p ~/.local/
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=nb>cd</span> <span class=s2>&#34;gh_</span><span class=si>${</span><span class=nv>ghcliVer</span><span class=si>}</span><span class=s2>_linux_amd64&#34;</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=c1># Merges directories</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=c1># From: https://unix.stackexchange.com/a/603209/246530</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>find -type d -exec mkdir -vp <span class=s2>&#34;</span><span class=nv>$DST</span><span class=s2>&#34;</span>/<span class=o>{}</span> <span class=se>\;</span> -or -exec mv -nv <span class=o>{}</span> <span class=s2>&#34;</span><span class=nv>$DST</span><span class=s2>&#34;</span>/<span class=o>{}</span> <span class=se>\;</span>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=nb>cd</span> ../
</span></span><span class=line><span class=ln>11</span><span class=cl>rm -rf <span class=s2>&#34;gh_</span><span class=si>${</span><span class=nv>ghcliVer</span><span class=si>}</span><span class=s2>_linux_amd64&#34;</span> <span class=s2>&#34;gh_</span><span class=si>${</span><span class=nv>ghcliVer</span><span class=si>}</span><span class=s2>_linux_amd64.tar.gz&#34;</span>
</span></span></code></pre></div><p>Now we can set this up.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>gh auth login <span class=c1># Follow the instructions</span>
</span></span></code></pre></div><p>The rest of the post assumes <code>gh</code> is present.</p><h2 id=dotfiles>Dotfiles</h2><p>Some of this post is simplified by using <a href=https://github.com/HaoZeke/Dotfiles>my Dotfiles</a> with <code>bombadil</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>cargo install toml-bombadil
</span></span><span class=line><span class=ln>2</span><span class=cl>mkdir -p <span class=nv>$HOME</span>/Git/Github
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=nb>cd</span> ~/Git/Github
</span></span><span class=line><span class=ln>4</span><span class=cl>gh repo clone HaoZeke/Dotfiles
</span></span><span class=line><span class=ln>5</span><span class=cl><span class=nb>cd</span> Dotfiles
</span></span><span class=line><span class=ln>6</span><span class=cl>git checkout bombadil
</span></span><span class=line><span class=ln>7</span><span class=cl>bombadil install -c bombadil.toml
</span></span></code></pre></div><p>We will need to make some directories since <code>bombadil</code> does not currently handle this. Make changes to the variables as required and then link them.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>mkdir -p ~/.config/nvim ~/.config/alacritty/ <span class=se>\
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=se></span>    ~/.spack/
</span></span><span class=line><span class=ln>3</span><span class=cl>bombadil link -p hpc elja <span class=c1># Combining profiles (variables)</span>
</span></span></code></pre></div><h2 id=spack>Spack</h2><p>For setting multi compiler workflows on the HPC, <a href=https://spack.io/>spack</a> is a great tool. It is also well documented and easy to add to. Rather than setting up a hierarchical <a href=https://lmod.readthedocs.io/en/latest/010_user.html>Lmod</a> structure, we shall use a <a href=https://spack.readthedocs.io/en/latest/environments.html>spack environment</a>. Although we have already a <code>micromamba</code> environment, <code>spack</code> configurations are more suited to the HPC workflow; since they are more easily customized.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl><span class=c1># Install</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=nb>cd</span> <span class=nv>$HOME</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>gh repo clone spack/spack
</span></span></code></pre></div><p>Now we can start by getting a new compiler.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>. ~/spack/share/spack/setup-env.sh
</span></span><span class=line><span class=ln>2</span><span class=cl>spack install gcc@9.3.0
</span></span><span class=line><span class=ln>3</span><span class=cl>spack compiler add <span class=k>$(</span>spack location -i gcc@9.3.0<span class=k>)</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>spack install gcc@10.2.0 %gcc@9.3.0
</span></span><span class=line><span class=ln>5</span><span class=cl>spack compiler add <span class=k>$(</span>spack location -i gcc@10.2.0<span class=k>)</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>spacktivate interactive <span class=c1># After setting the environment</span>
</span></span></code></pre></div><h3 id=environments>Environments</h3><p>This step is not required if one uses my <code>dotfiles</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln> 1</span><span class=cl><span class=c># $SPACK_HOME//var/spack/environments/interactive/spack.yaml</span><span class=w>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=w></span><span class=nt>spack</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w>  </span><span class=nt>definitions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w>    </span>- <span class=nt>compilers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;gcc@10.2.0&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=w>    </span>- <span class=nt>packages</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w>
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=w>      </span><span class=s1>&#39;zsh&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;tmux&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;git&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=w>      </span><span class=s1>&#39;openssl&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;gmp&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;mpfr&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=w>      </span><span class=s1>&#39;mpc&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;perl&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;boost&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;subversion&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=w>      </span><span class=s1>&#39;zlib&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;cmake&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;bison&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;bdw-gc&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=w>      </span><span class=s1>&#39;flex&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;pcre&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;jq&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;patch&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=w>      </span><span class=s1>&#39;bzip2&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;sqlite&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;editline&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=w>      </span><span class=s1>&#39;ncurses&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;texinfo&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;brotli&#39;</span><span class=w>
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=w>      </span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=w>  </span><span class=nt>specs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>15</span><span class=cl><span class=w>    </span>- <span class=l>$compilers</span><span class=w>
</span></span></span><span class=line><span class=ln>16</span><span class=cl><span class=w>    </span>- <span class=s1>&#39;subversion%gcc@9.3.0&#39;</span><span class=w>
</span></span></span><span class=line><span class=ln>17</span><span class=cl><span class=w>    </span>- <span class=nt>matrix</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>18</span><span class=cl><span class=w>       </span>- <span class=p>[</span><span class=l>$packages]</span><span class=w>
</span></span></span><span class=line><span class=ln>19</span><span class=cl><span class=w>       </span>- <span class=p>[</span><span class=l>$%compilers]</span><span class=w>
</span></span></span><span class=line><span class=ln>20</span><span class=cl><span class=w>  </span><span class=nt>view</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span></code></pre></div><p>Note that <code>subversion</code> depends on <code>serf</code> which currently does not build with <code>gcc@10.x.x</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>spacktivate interactive
</span></span><span class=line><span class=ln>2</span><span class=cl>spack install
</span></span></code></pre></div><p>Alternatively, one can just <code>spack load</code> packages of interest after <code>spack install</code>.</p><h3 id=cleaning-modules>Cleaning Modules</h3><p>This step is not required if one uses the <code>dotfiles</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln> 1</span><span class=cl><span class=nt>modules</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=w>  </span><span class=nt>enable:</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w>    </span>- <span class=l>lmod</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w>  </span><span class=nt>lmod</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=w>    </span><span class=nt>core_compilers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=w>      </span>- <span class=s1>&#39;gcc@10.2.0&#39;</span><span class=w>
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=w>    </span><span class=nt>hierarchy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=w>      </span>- <span class=l>mpi</span><span class=w>
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=w>    </span><span class=nt>hash_length</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=w>    </span><span class=nt>whitelist</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=w>      </span>- <span class=l>gcc</span><span class=w>
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=w>    </span><span class=nt>blacklist</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=w>      </span>- <span class=s1>&#39;%gcc@10.2.0&#39;</span><span class=w>
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=w>    </span><span class=nt>all</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>15</span><span class=cl><span class=w>      </span><span class=nt>filter</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>16</span><span class=cl><span class=w>        </span><span class=nt>environment_blacklist</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>17</span><span class=cl><span class=w>          </span>- <span class=s2>&#34;C_INCLUDE_PATH&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln>18</span><span class=cl><span class=w>          </span>- <span class=s2>&#34;CPLUS_INCLUDE_PATH&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln>19</span><span class=cl><span class=w>          </span>- <span class=s2>&#34;LIBRARY_PATH&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln>20</span><span class=cl><span class=w>      </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>21</span><span class=cl><span class=w>        </span><span class=nt>set</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>22</span><span class=cl><span class=w>          </span><span class=s1>&#39;{name}_ROOT&#39;</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{prefix}&#39;</span><span class=w>
</span></span></span><span class=line><span class=ln>23</span><span class=cl><span class=w>    </span><span class=nt>openmpi</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>24</span><span class=cl><span class=w>      </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>25</span><span class=cl><span class=w>        </span><span class=nt>set</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>26</span><span class=cl><span class=w>          </span><span class=nt>SLURM_MPI_TYPE</span><span class=p>:</span><span class=w> </span><span class=l>pmi2</span><span class=w>
</span></span></span><span class=line><span class=ln>27</span><span class=cl><span class=w>          </span><span class=nt>OMPI_MCA_btl_openib_warn_default_gid_prefix</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;0&#39;</span><span class=w>
</span></span></span><span class=line><span class=ln>28</span><span class=cl><span class=w>    </span><span class=nt>projections</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>29</span><span class=cl><span class=w>      </span><span class=nt>all</span><span class=p>:</span><span class=w>          </span><span class=s1>&#39;{name}/{version}&#39;</span><span class=w>
</span></span></span><span class=line><span class=ln>30</span><span class=cl><span class=w>      </span><span class=nt>^lapack</span><span class=p>:</span><span class=w>      </span><span class=s1>&#39;{name}/{version}-{^lapack.name}&#39;</span><span class=w>
</span></span></span></code></pre></div><p>We can then rebuild the setup.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>spack module lmod refresh --delete-tree -y
</span></span></code></pre></div><h2 id=nix>Nix</h2><h3 id=portable>Portable</h3><p><a href=https://github.com/DavHau/nix-portable>nix-portable</a> is one of the best projects for working with local <code>nix</code> installations. Where it works, it works very simply:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>wget https://github.com/DavHau/nix-portable/releases/download/v006/nix-portable
</span></span><span class=line><span class=ln>2</span><span class=cl>chmod +x nix-portable
</span></span><span class=line><span class=ln>3</span><span class=cl>mv nix-portable ~/.local/bin
</span></span></code></pre></div><h3 id=mamba>Mamba</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl><span class=c1># Spack requirements</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=nv>PKGS</span><span class=o>=</span><span class=s2>&#34;git patch curl make tar gzip bzip2 xz zstd brotli openssl sqlite bdw-gc nlohmann_json editline libxml2 libxslt libseccomp bison flex lsof libarchive automake pkg-config&#34;</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>micromamba create -p ~/.mamba_venvs/nixIns <span class=nv>$PKGS</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>micromamba activate ~/.mamba_venvs/nixIns
</span></span></code></pre></div><p>It is best to have a clean, maximal <code>boost</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>git clone --recursive https://github.com/boostorg/boost.git
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=nb>cd</span> boost
</span></span><span class=line><span class=ln>3</span><span class=cl>git checkout tags/boost-1.73.0
</span></span><span class=line><span class=ln>4</span><span class=cl>./bootstrap.sh
</span></span><span class=line><span class=ln>5</span><span class=cl>./b2 headers
</span></span><span class=line><span class=ln>6</span><span class=cl>./b2
</span></span><span class=line><span class=ln>7</span><span class=cl>./b2 install --prefix<span class=o>=</span><span class=nv>$HOME</span>/.hpc/boost/boost-1.73.0
</span></span><span class=line><span class=ln>8</span><span class=cl>ml load boost/boost-1.73.0
</span></span></code></pre></div><p>Now we can try to compile a patched older <code>nix</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl><span class=nb>export</span> <span class=nv>myprefix</span><span class=o>=</span><span class=nv>$HOME</span>/.hpc/nix/nix-boot
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=nb>export</span> <span class=nv>nixdir</span><span class=o>=</span><span class=nv>$HOME</span>/.nix
</span></span><span class=line><span class=ln>3</span><span class=cl>./configure  --enable-gc --prefix<span class=o>=</span><span class=nv>$myprefix</span> <span class=se>\
</span></span></span><span class=line><span class=ln>4</span><span class=cl><span class=se></span>--with-store-dir<span class=o>=</span><span class=nv>$nixdir</span>/store --localstatedir<span class=o>=</span><span class=nv>$nixdir</span>/var <span class=se>\
</span></span></span><span class=line><span class=ln>5</span><span class=cl><span class=se>\
</span></span></span><span class=line><span class=ln>6</span><span class=cl><span class=se></span>--disable-seccomp-sandboxing --disable-doc-gen <span class=se>\
</span></span></span><span class=line><span class=ln>7</span><span class=cl><span class=se></span><span class=nv>CPPFLAGS</span><span class=o>=</span><span class=s2>&#34;-I</span><span class=nv>$HOME</span><span class=s2>/.mamba_venvs/nixIns/include&#34;</span> <span class=nv>LDFLAGS</span><span class=o>=</span><span class=s2>&#34;-L</span><span class=nv>$HOME</span><span class=s2>/.mamba_venvs/nixIns/lib -Wl,-R</span><span class=nv>$HOME</span><span class=s2>/.mamba_venvs/nixIns/lib&#34;</span>
</span></span><span class=line><span class=ln>8</span><span class=cl>make -j <span class=k>$(</span>nproc<span class=k>)</span>
</span></span><span class=line><span class=ln>9</span><span class=cl>make install
</span></span></code></pre></div><h3 id=spack>Spack</h3><p>When the existing methods don&rsquo;t work, we can fall back to a more rustic method. We need some additional packages, which are not part of <code>spack</code> yet.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>spack create https://github.com/anrieff/libcpuid/releases/download/v0.5.1/libcpuid-0.5.1.tar.gz
</span></span><span class=line><span class=ln>2</span><span class=cl>spack install libcpuid
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>mkdir -m <span class=m>0755</span> ~/.nix
</span></span><span class=line><span class=ln>2</span><span class=cl>spack install nix <span class=nv>storedir</span><span class=o>=</span><span class=nv>$nixdir</span>/store <span class=nv>statedir</span><span class=o>=</span><span class=nv>$nixdir</span>/var <span class=nv>doc</span><span class=o>=</span>False <span class=nv>sandboxing</span><span class=o>=</span>False <span class=nv>nfs</span><span class=o>=</span>True
</span></span><span class=line><span class=ln>3</span><span class=cl>spack load nix
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=c1># Basic setup</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>mkdir -p  ~/.nix/var/nix/profiles
</span></span><span class=line><span class=ln>6</span><span class=cl>nix-env --switch-profile .nix/var/nix/profiles/default
</span></span></code></pre></div><p>Now we can install this natively with <code>spack</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln> 1</span><span class=cl>mkdir -p <span class=nv>$HOME</span>/Git/Github
</span></span><span class=line><span class=ln> 2</span><span class=cl>gh repo clone nixos/nixpkgs
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=nb>cd</span> nixpkgs
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=nb>export</span> <span class=nv>NIX_PATH</span><span class=o>=</span><span class=k>$(</span><span class=nb>pwd</span><span class=k>)</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=nb>export</span> <span class=nv>nixdir</span><span class=o>=</span><span class=nv>$HOME</span>/.nix
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=nb>export</span> <span class=nv>PATH</span><span class=o>=</span><span class=k>$(</span>spack location -i nix<span class=k>)</span>/bin/:<span class=nv>$PATH</span>:<span class=nv>$nixdir</span>/bin
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=nb>export</span> <span class=nv>INCLUDE</span><span class=o>=</span><span class=k>$(</span>spack location -i nix<span class=k>)</span>/include/:<span class=nv>$INCLUDE</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=nb>export</span> <span class=nv>LD_LIBRARY_PATH</span><span class=o>=</span><span class=k>$(</span>spack location -i nix<span class=k>)</span>/lib:<span class=nv>$LD_LIBRARY_PATH</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=nb>export</span> <span class=nv>PKG_CONFIG_PATH</span><span class=o>=</span><span class=k>$(</span>spack location -i nix<span class=k>)</span>/lib/pkgconfig/:<span class=nv>$PKG_CONFIG_PATH</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>nix-env -i nix -f <span class=nv>$HOME</span>/Git/Github/nixpkgs -j<span class=k>$(</span>nproc<span class=k>)</span> --keep-going --show-trace -v --cores <span class=k>$(</span>nproc<span class=k>)</span> 2&gt;<span class=p>&amp;</span><span class=m>1</span> <span class=p>|</span> tee nix-no-root.log
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln> 1</span><span class=cl><span class=nb>export</span> <span class=nv>BOOST_ROOT</span><span class=o>=</span><span class=k>$(</span>spack location -i boost<span class=k>)</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>./configure --enable-gc <span class=se>\
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=se></span> --prefix<span class=o>=</span><span class=nv>$myprefix</span> <span class=se>\
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=se></span> --with-store-dir<span class=o>=</span><span class=nv>$nixdir</span>/store <span class=se>\
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=se></span> --localstatedir<span class=o>=</span><span class=nv>$nixdir</span>/var <span class=se>\
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=se></span> --with-boost<span class=o>=</span><span class=nv>$BOOST_ROOT</span> <span class=se>\
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=se></span> --disable-seccomp-sandboxing <span class=se>\
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=se></span> --disable-doc-gen <span class=se>\
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=se></span> --includedir<span class=o>=</span><span class=s2>&#34;</span><span class=k>$(</span>spack location -i bdw-gc<span class=k>)</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=se></span> --includedir<span class=o>=</span><span class=s2>&#34;</span><span class=k>$(</span>spack location -i bzip2<span class=k>)</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=se></span> --includedir<span class=o>=</span><span class=s2>&#34;</span><span class=k>$(</span>spack location -i nlohmann-json<span class=k>)</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=se></span> --libdir<span class=o>=</span><span class=s2>&#34;</span><span class=k>$(</span>spack location -i bzip2<span class=k>)</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=se></span> --libdir<span class=o>=</span><span class=s2>&#34;</span><span class=k>$(</span>spack location -i bdw-gc<span class=k>)</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=se></span> <span class=nv>PKG_CONFIG</span><span class=o>=</span><span class=k>$(</span>spack location -i pkg-config<span class=k>)</span>/bin/pkg-config <span class=se>\
</span></span></span><span class=line><span class=ln>15</span><span class=cl><span class=se></span> <span class=nv>OPENSSL_CFLAGS</span><span class=o>=</span>-I<span class=k>$(</span>spack location -i openssl<span class=k>)</span>/include <span class=se>\
</span></span></span><span class=line><span class=ln>16</span><span class=cl><span class=se></span> <span class=nv>OPENSSL_LIBS</span><span class=o>=</span>-L<span class=k>$(</span>spack location -i openssl<span class=k>)</span>/lib <span class=se>\
</span></span></span><span class=line><span class=ln>17</span><span class=cl><span class=se></span> <span class=nv>CPPFLAGS</span><span class=o>=</span><span class=s2>&#34;-I</span><span class=k>$(</span>spack location -i nlohmann-json<span class=k>)</span><span class=s2>/include&#34;</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>make -j <span class=k>$(</span>nproc<span class=k>)</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>make install
</span></span><span class=line><span class=ln>20</span><span class=cl>ml load nix/user <span class=c1># Hooray!</span>
</span></span></code></pre></div><h2 id=self-hosted-binaries>Self hosted binaries</h2><h3 id=code-server>Code Server</h3><p>The first of the selfhosted set is the <a href=https://github.com/cdr/code-server/>browser based IDE</a> inspired by Visual Studio Code.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl><span class=nb>export</span> <span class=nv>VERSION</span><span class=o>=</span>3.12.0
</span></span><span class=line><span class=ln>2</span><span class=cl>mkdir -p ~/.local/lib ~/.local/bin
</span></span><span class=line><span class=ln>3</span><span class=cl>curl -fL <span class=s2>&#34;https://github.com/cdr/code-server/releases/download/v</span><span class=nv>$VERSION</span><span class=s2>/code-server-</span><span class=nv>$VERSION</span><span class=s2>-linux-amd64.tar.gz&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=ln>4</span><span class=cl><span class=se></span>  <span class=p>|</span> tar -C ~/.local/lib -xz
</span></span><span class=line><span class=ln>5</span><span class=cl>mv <span class=s2>&#34;</span><span class=nv>$HOME</span><span class=s2>/.local/lib/code-server-</span><span class=nv>$VERSION</span><span class=s2>-linux-amd64&#34;</span> <span class=s2>&#34;</span><span class=nv>$HOME</span><span class=s2>/.local/lib/code-server-</span><span class=nv>$VERSION</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>ln -s <span class=s2>&#34;</span><span class=nv>$HOME</span><span class=s2>/.local/lib/code-server-</span><span class=nv>$VERSION</span><span class=s2>/bin/code-server&#34;</span> <span class=s2>&#34;</span><span class=nv>$HOME</span><span class=s2>/.local/bin/code-server&#34;</span>
</span></span><span class=line><span class=ln>7</span><span class=cl><span class=nv>PATH</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$HOME</span><span class=s2>/.local/bin:</span><span class=nv>$PATH</span><span class=s2>&#34;</span>
</span></span></code></pre></div><p>This has the advantage of not needing any port forwarding (with <code>--link</code>):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>code-server --link
</span></span></code></pre></div><p>Naturally this is often disabled by more security oriented SysAdmins. This can be circumvented with the same <code>ngrok</code> scheme as outlined earlier.</p><h2 id=conclusions>Conclusions</h2><p>This is a work in progress, and would likely need to be updated ever so often,
perhaps like a &ldquo;State Of My Dots&rdquo; or a yearly &ldquo;HPC Configuration $YEAR&rdquo; or
something like that.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>A step in the right direction in terms of female representation among the university servers&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div></article><hr><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=/tags/workflow>workflow</a></span><span class=tag><a href=/tags/projects>projects</a></span><span class=tag><a href=/tags/hpc>hpc</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>1353 Words</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Posted: <time class=dt-published>2021-05-09 23:12 +0000</time></p><a class=resp-sharing-button__link href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2frgoswami.me%2fposts%2fhpc-conf-2021%2f" target=_blank rel=noopener aria-label=Facebook><div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--medium"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--circle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="11.5"/><path d="M15.84 9.5H13.5V8.48c0-.53.35-.65.6-.65h1.4v-2.3h-2.35c-2.3.0-2.65 1.7-2.65 2.8V9.5h-2v2h2v7h3v-7h2.1l.24-2z"/></svg></div>Facebook</div></a><a class=resp-sharing-button__link href="https://twitter.com/intent/tweet/?text=%22HPC%20Configuration%202021%22%20seems%20like%20an%20interesting%20read%20from%20%40rg0swami&amp;url=https%3a%2f%2frgoswami.me%2fposts%2fhpc-conf-2021%2f" target=_blank rel=noopener aria-label=Twitter><div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--medium"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--circle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.5 7.4l-2 .2c-.4-.5-1-.8-2-.8C13.3 6.8 12 8 12 9.4v.6c-2 0-4-1-5.4-2.7-.2.4-.3.8-.3 1.3.0 1 .4 1.7 1.2 2.2-.5.0-1 0-1.2-.3.0 1.3 1 2.3 2 2.6-.3.4-.7.4-1 0 .2 1.4 1.2 2 2.3 2-1 1-2.5 1.4-4 1 1.3 1 2.7 1.4 4.2 1.4 4.8.0 7.5-4 7.5-7.5v-.4c.5-.4.8-1.5 1.2-2z"/><circle cx="12" cy="12" r="11.5"/></svg></div>Twitter</div></a><a class=resp-sharing-button__link href="mailto:?subject=%22HPC%20Configuration%202021%22%20seems%20interesting...&amp;body=https%3a%2f%2frgoswami.me%2fposts%2fhpc-conf-2021%2f" target=_self rel=noopener aria-label=E-Mail><div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--medium"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--circle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.5 16c0 .8-.7 1.5-1.5 1.5H6c-.8.0-1.5-.7-1.5-1.5V8c0-.8.7-1.5 1.5-1.5h12c.8.0 1.5.7 1.5 1.5v8zm-2-7.5L12 13 6.5 8.5m11 6-4-2.5m-7 2.5 4-2.5"/><circle cx="12" cy="12" r="11.5"/></svg></div>E-Mail</div></a><a class=resp-sharing-button__link href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2frgoswami.me%2fposts%2fhpc-conf-2021%2f&amp;title=%22HPC%20Configuration%202021%22%20seems%20interesting...&amp;summary=%22HPC%20Configuration%202021%22%20seems%20interesting...&amp;source=https%3a%2f%2frgoswami.me%2fposts%2fhpc-conf-2021%2f" target=_blank rel=noopener aria-label=LinkedIn><div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--medium"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--circle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="11.5"/><path d="M15 12.5c-.28.0-.5.22-.5.5v3.5h-3s.03-6.48.0-7h3v.83s.46-.75 1.7-.75c1.56.0 2.3 1.12 2.3 3.3v3.62h-3V13c0-.28-.23-.5-.5-.5zm-7.5-3h2v7h-2z"/><circle cx="8.5" cy="6.5" r="1"/></svg></div>LinkedIn</div></a><a class=resp-sharing-button__link href="https://reddit.com/submit/?url=https%3a%2f%2frgoswami.me%2fposts%2fhpc-conf-2021%2f&amp;resubmit=true&amp;title=%22HPC%20Configuration%202021%22%20seems%20interesting..." target=_blank rel=noopener aria-label=Reddit><div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--medium"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--circle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="11.5"/><ellipse cx="12" cy="14.37" rx="6.2" ry="4.24"/><path d="M14.3 16.25c-.62.36-1.42.57-2.3.57s-1.7-.2-2.32-.58"/><circle cx="14.61" cy="13.39" r=".98"/><circle cx="9.39" cy="13.39" r=".98"/><path d="M16.4 11.38c.26-.55.82-.92 1.47-.92.9.0 1.63.73 1.63 1.63.0.8-.6 1.47-1.38 1.6"/><circle cx="17.22" cy="7.52" r="1.63"/><path d="M7.6 11.38c-.26-.54-.82-.92-1.47-.92-.9.0-1.63.73-1.63 1.63.0.8.6 1.47 1.38 1.6M12 10.12s-.08-4.82 3.6-2.6"/></svg></div>Reddit</div></a><a class=resp-sharing-button__link href="whatsapp://send?text=%22HPC%20Configuration%202021%22%20seems%20interesting...%20https%3a%2f%2frgoswami.me%2fposts%2fhpc-conf-2021%2f" target=_blank rel=noopener aria-label=WhatsApp><div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--medium"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--circle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle xmlns="http://www.w3.org/2000/svg" cx="12" cy="12" r="11.5"/><path stroke-width="1" d="M17.6 6.2c-1.5-1.5-3.4-2.3-5.5-2.3-4.3.0-7.8 3.5-7.8 7.8.0 1.4.4 2.7 1 3.9l-1.1 4 4.1-1.1c1.1.6 2.4.9 3.7.9 4.3.0 7.8-3.5 7.8-7.8.1-2-.7-3.9-2.2-5.4zm-5.5 11.9c-1.2.0-2.3-.3-3.3-.9l-.2-.1-2.4.6.7-2.4-.2-.2c-.6-1-1-2.2-1-3.4.0-3.6 2.9-6.5 6.5-6.5 1.7.0 3.3.7 4.6 1.9 1.2 1.2 1.9 2.8 1.9 4.6-.1 3.5-3 6.4-6.6 6.4zm3.5-4.8c-.2-.1-1.1-.6-1.3-.6-.2-.1-.3-.1-.4.1s-.5.6-.6.8c-.1.1-.2.1-.4.0s-.8-.3-1.6-1c-.6-.5-1-1.2-1.1-1.3-.1-.2.0-.3.1-.4l.3-.3s.1-.2.2-.3c.1-.1.0-.2.0-.3s-.4-1.1-.6-1.4c-.2-.4-.3-.3-.4-.3h-.4s-.3.0-.5.2-.7.7-.7 1.6c0 1 .7 1.9.8 2s1.4 2.1 3.3 2.9c.5.2.8.3 1.1.4.5.1.9.1 1.2.1.4-.1 1.1-.5 1.3-.9.2-.5.2-.8.1-.9.0-.2-.2-.3-.4-.4z"/></svg></div>WhatsApp</div></a></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://rgoswami.me/posts/cip2021-fin/><span class=button__icon>←</span>
<span class=button__text>Wrapping Up Code in Place 2021</span>
</a></span><span class="button next"><a href=https://rgoswami.me/posts/dotfiles-dotgit-bombadil/><span class=button__text>Dotfiles from dotgit to bombadil</span>
<span class=button__icon>→</span></a></span></div></div><div id=comments class=thin><div class=pagination__title><span class=pagination__title-h>Comments</span><hr></div><script src=https://utteranc.es/client.js repo=haozeke/haozeke.github.io issue-term=pathname theme=photon-dark label="Utterance 💬" crossorigin=anonymous async></script></div></main><footer class=footer><p>&copy; 2024
<span><a href=https://rgoswami.me/>Rohit Goswami (HaoZeke)</a></span>
<a href=/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a><br><a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a>.
Powered by <a href=http://gohugo.io><u>Hugo</u></a> and <a href=https://github.com/HaoZeke/hugo-theme-hello-friend-ng-hz><u>this theme</u></a>.</br>Hosted with <u><a href=https://www.netlify.com/>Netlify</a></u>.</br><script src=https://liberapay.com/rohit/widgets/button.js></script><noscript><a href=https://liberapay.com/rohit/donate><img alt="Donate using Liberapay" src=https://liberapay.com/assets/widgets/donate.svg></a></noscript></p></footer></div><script src=/bundle.min.5fae9992ea406007408dc33b0b3a8376d61e2f1d6ac50ba1dad7580ac50afb5199bcef3bbc3677e77553a9980bf882cf71edc2f755687dd7725f12ece4304ac2.js></script><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-109503488-16","auto"),ga("send","pageview")</script><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","3z2xvwqu4u")</script><script data-goatcounter=https://rgoswami.goatcounter.com/count async src=//gc.zgo.at/count.js></script><script>var clicky_site_ids=clicky_site_ids||[];clicky_site_ids.push("101265002")</script><script async src=https://static.getclicky.com/js></script><script src=https://cdn.jsdelivr.net/npm/readmore-js@3.0.0-beta-1/dist/readmore.min.js></script><script src=/js/codefold.min.f0790269b87613b3bcff64022840fe1991eee3ea384e874c78a24022c9936bd888a3c14a05a10955881eebb1558e4fcf37576dac120cd0bf4ebaf7aca27b35b1.js></script><script src=/js/copyClipboard.min.1c92539aea398296101add0e80508ad94cb59fb37f946f06ec9ca1c7558a961b8de0c5595a921aed70aa91eb94d24db35e5a01243bc625f8b1814b17928f478b.js></script></body></html>