<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="[Rohit Goswami]"><meta name=description content="Ruminating on wayland and sway for daily use with ArchLinux
Background Many years ago, I found time to make an attempt to switch away from the X11 Window system to Wayland. At the time, I ended up switching back to Xorg, but I did want to revisit it. Since I returned from home recently and was gifted a Gen 6 ThinkPad X1 Carbon, I had a perfect opportunity to do so 1."><meta name=keywords content="personal,rambling,workflow"><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://rgoswami.me/posts/revisiting-wayland-2021-archlinux/><meta name=generator content="Wooframework"><title>Revisiting Wayland for ArchLinux :: Rohit Goswami — Reflections
</title><link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css rel=stylesheet type=text/css><link rel=stylesheet href=/main.min.054e30538b054b321af6575a7659f551cec63e1cef6bbd674acccadf856d3aff.css><meta itemprop=name content="Revisiting Wayland for ArchLinux"><meta itemprop=description content="Ruminating on wayland and sway for daily use with ArchLinux
Background Many years ago, I found time to make an attempt to switch away from the X11 Window system to Wayland. At the time, I ended up switching back to Xorg, but I did want to revisit it. Since I returned from home recently and was gifted a Gen 6 ThinkPad X1 Carbon, I had a perfect opportunity to do so 1."><meta itemprop=datePublished content="2021-12-24T18:13:00+00:00"><meta itemprop=dateModified content="2021-12-24T18:13:00+00:00"><meta itemprop=wordCount content="2215"><meta itemprop=image content="https://rgoswami.me/images/RG.png"><meta itemprop=keywords content="rambling,workflow,"><meta property="og:title" content="Revisiting Wayland for ArchLinux"><meta property="og:description" content="Ruminating on wayland and sway for daily use with ArchLinux
Background Many years ago, I found time to make an attempt to switch away from the X11 Window system to Wayland. At the time, I ended up switching back to Xorg, but I did want to revisit it. Since I returned from home recently and was gifted a Gen 6 ThinkPad X1 Carbon, I had a perfect opportunity to do so 1."><meta property="og:type" content="article"><meta property="og:url" content="https://rgoswami.me/posts/revisiting-wayland-2021-archlinux/"><meta property="og:image" content="https://rgoswami.me/images/RG.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-12-24T18:13:00+00:00"><meta property="article:modified_time" content="2021-12-24T18:13:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://rgoswami.me/images/RG.png"><meta name=twitter:title content="Revisiting Wayland for ArchLinux"><meta name=twitter:description content="Ruminating on wayland and sway for daily use with ArchLinux
Background Many years ago, I found time to make an attempt to switch away from the X11 Window system to Wayland. At the time, I ended up switching back to Xorg, but I did want to revisit it. Since I returned from home recently and was gifted a Gen 6 ThinkPad X1 Carbon, I had a perfect opportunity to do so 1."><meta property="article:section" content="notes"><meta property="article:published_time" content="2021-12-24 18:13:00 +0000 UTC"></head><body class=dark-theme><div class=container><header class=header><div class=header__inner><div class=header__left><div class=logo><a href=/ style=text-decoration:none><img src=/images/home.png alt></a></div></div><div class=header__mid><button class=button><div class=button__text><a href=https://rgoswami.me//search>Search</a></div></button></div><div class=header__right><nav class=menu><ul class=menu__inner><li><a href=/about>About</a></li><li><a href=/posts>Blog</a></li><li><a href=/series>Series</a></li></ul><ul class=menu__inner><li><a href=/categories>Categories</a></li><li><a href=/snippets>Snippets</a></li><li><a href=/tags>Tags</a></li></ul></nav><button id=toggleMenu><div class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></div></button>
<button class=theme-toggle id=toggleTheme><svg class="theme-toggler" width="32" height="32" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></button></div></div></header><script src=/js/mathjax-config.js></script><script id=MathJax-script async src=https://unpkg.com/mathjax@3/es5/tex-chtml.js></script><aside class=sidebar><div class=hideTOC><button id=tocTog>TOC</button><div class="sideTOC m-fadeOut"><nav id=TableOfContents><ul><li><a href=#background>Background</a></li><li><a href=#archlinux-baseline>ArchLinux baseline</a><ul><li><a href=#configurations>Configurations</a></li></ul></li><li><a href=#window-session-management>Window / Session Management</a></li><li><a href=#sway-basics>Sway basics</a><ul><li><a href=#high-dpi>High DPI</a></li><li><a href=#display-management>Display management</a></li></ul></li><li><a href=#xwayland-proxies>XWayland proxies</a></li><li><a href=#miscellaneous>Miscellaneous</a><ul><li><a href=#terminal-emulators>Terminal Emulators</a></li><li><a href=#screenshots>Screenshots</a></li><li><a href=#screen-recorders>Screen Recorders</a></li><li><a href=#reference-management>Reference Management</a></li><li><a href=#mail-clients>Mail Clients</a></li><li><a href=#electron>Electron</a></li><li><a href=#browsers>Browsers</a></li><li><a href=#rstudio>RStudio</a></li></ul></li><li><a href=#conclusions>Conclusions</a></li></ul></nav></div></div></aside><main class=post><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>11 minutes<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Written: 2021-12-24 18:13 +0000</p></p></div><article class=h-entry><h1 class="post-title p-name"><a class=u-url href=https://rgoswami.me/posts/revisiting-wayland-2021-archlinux/>Revisiting Wayland for ArchLinux</a></h1><div class=post-info><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-pen-tool"><path d="M12 19l7-7 3 3-7 7-3-3z"/><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/><path d="M2 2l7.586 7.586"/><circle cx="11" cy="11" r="2"/></svg><span class="author u-author p-author"><a href=/author/rohit-goswami>Rohit Goswami</a></span></div><hr><aside id=toc class=sidebar><div class=toc-title>Table of Contents</div><nav id=TableOfContents><ul><li><a href=#background>Background</a></li><li><a href=#archlinux-baseline>ArchLinux baseline</a><ul><li><a href=#configurations>Configurations</a></li></ul></li><li><a href=#window-session-management>Window / Session Management</a></li><li><a href=#sway-basics>Sway basics</a><ul><li><a href=#high-dpi>High DPI</a></li><li><a href=#display-management>Display management</a></li></ul></li><li><a href=#xwayland-proxies>XWayland proxies</a></li><li><a href=#miscellaneous>Miscellaneous</a><ul><li><a href=#terminal-emulators>Terminal Emulators</a></li><li><a href=#screenshots>Screenshots</a></li><li><a href=#screen-recorders>Screen Recorders</a></li><li><a href=#reference-management>Reference Management</a></li><li><a href=#mail-clients>Mail Clients</a></li><li><a href=#electron>Electron</a></li><li><a href=#browsers>Browsers</a></li><li><a href=#rstudio>RStudio</a></li></ul></li><li><a href=#conclusions>Conclusions</a></li></ul></nav></aside><hr><div class="post-content e-content"><blockquote><p>Ruminating on <code>wayland</code> and <code>sway</code> for daily use with ArchLinux</p></blockquote><h2 id=background>Background</h2><p><a href=https://grimoire.science/working-with-wayland-and-sway/>Many years ago</a>, I found time to make an attempt to switch away from the X11
Window system <a href=https://wiki.archlinux.org/title/Wayland>to Wayland</a>. At the time, I ended up switching back to Xorg, but I
did want to revisit it. Since I returned from home recently and was gifted a <a href=https://www.lenovo.com/us/en/p/laptops/thinkpad/thinkpadx1/thinkpad-x1-carbon-(6th-gen)/22tp2txx16g>Gen 6 ThinkPad X1 Carbon</a>, I had a perfect opportunity to do so <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>.</p><p>Part of this post will be interspersed with generic non-Wayland observations,
but it has been a few years since my last setup and things have changed. Rather
than regurgitate the fantastic <a href=https://wiki.archlinux.org/title/installation_guide>ArchWiki installation guide</a>, a FAQ style
short-doc seems more appropriate.</p><p>As before, none of these configurations should be considered
complete/recommended/normative; <strong>use the installation guide</strong> and <span class=underline>follow the Arch Way</span>. These are install notes, not tutorials.</p><h2 id=archlinux-baseline>ArchLinux baseline</h2><dl><dt><strong>Networking</strong></dt><dd>The days of <code>wifi-menu</code> are gone. The new <code>iwd</code> interface (<a href=https://wiki.archlinux.org/title/Iwd>ArchWiki</a>) is <a href=https://lwn.net/Articles/770991/>the newest, swankiest kid</a> on the block <sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> and works great with <code>NetworkManager</code></dd><dt><strong>Input devices</strong></dt><dd><code>loadkeys</code> for the console, <code>libinput</code> configurations can be handled via the window manager under Wayland</dd><dt><strong>Audio</strong></dt><dd><code>pulseaudio</code> works well as always, though <code>pipewire</code> is pretty neat as well</dd><dt><strong>Nix</strong></dt><dd>Via the <a href=https://nixos.org/guides/install-nix.html>multi-user install</a></dd><dt><strong>Time</strong></dt><dd>Being as this is a laptop configuration, it is best to configure <code>chrony</code> (<a href=https://wiki.archlinux.org/title/Chrony>described here</a>) as the <code>ntp</code> client and server of choice</dd><dt><strong>AUR Helper</strong></dt><dd><code>trizen</code>, though I retain a soft spot for <code>yay</code></dd><dt><strong>Portability</strong></dt><dd>Details are presented concisely on <a href=https://wiki.archlinux.org/title/Laptop>the ArchWiki</a></dd><dt><strong>Device details</strong></dt><dd>The ArchWiki <a href=https://wiki.archlinux.org/title/Lenovo_ThinkPad_X1_Carbon_(Gen_6)>has an entry</a>, notably including modem setup woes and also <code>throttled</code> details for better power management (I ended up using <a href=https://github.com/erpalma/throttled>throttled</a> over <code>thermald</code>)</dd><dt><strong>Window and login</strong></dt><dd><code>sway</code>, and <code>greetd</code></dd></dl><h3 id=configurations>Configurations</h3><p>In general the idea is to run as few services as possible so <code>systemctl --type=service</code> is very helpful.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln> 1</span><span class=cl>systemctl --type<span class=o>=</span>service
</span></span><span class=line><span class=ln> 2</span><span class=cl> UNIT                                                 LOAD   ACTIVE SUB     DESCRIPTION
</span></span><span class=line><span class=ln> 3</span><span class=cl>  bolt.service                                         loaded active running Thunderbolt system service
</span></span><span class=line><span class=ln> 4</span><span class=cl>  chronyd.service                                      loaded active running NTP client/server
</span></span><span class=line><span class=ln> 5</span><span class=cl>  dbus.service                                         loaded active running D-Bus System Message Bus
</span></span><span class=line><span class=ln> 6</span><span class=cl>  greetd.service                                       loaded active running Greeter daemon
</span></span><span class=line><span class=ln> 7</span><span class=cl>  iwd.service                                          loaded active running Wireless service
</span></span><span class=line><span class=ln> 8</span><span class=cl>  kmod-static-nodes.service                            loaded active exited  Create List of Static Device Nodes
</span></span><span class=line><span class=ln> 9</span><span class=cl>  lenovo_fix.service                                   loaded active running Stop Intel throttling
</span></span><span class=line><span class=ln>10</span><span class=cl>  lvm2-monitor.service                                 loaded active exited  Monitoring of LVM2 mirrors, snapshots etc. using dmeventd or progress polling
</span></span><span class=line><span class=ln>11</span><span class=cl>  NetworkManager.service                               loaded active running Network Manager
</span></span><span class=line><span class=ln>12</span><span class=cl>  open-fprintd.service                                 loaded active running Open FPrint Daemon
</span></span><span class=line><span class=ln>13</span><span class=cl>...
</span></span></code></pre></div><h4 id=refind-stanzas>rEFInd Stanzas</h4><p>Some things I forgot which I should not have, and which should be taken in more of a RTFM vein.</p><dl><dt><code>boot/refind_linux.conf</code></dt><dd>for kernel parameters used with auto-detected stanzas, e.g. enabling app-armor everywhere via <code>lsm=landlock,lockdown,yama,apparmor,bpf</code><ul><li>This <strong>is not</strong> where boot stanzas are to be defined</li></ul></dd><dt><code>boot/EFI/refind/refind.conf</code></dt><dd>for manual stanzas, settings, themes and other things</dd></dl><p>Also random observations.</p><ul><li><code>/etc/fstab</code> is completely useless for booting, but should mount <code>boot</code> correctly otherwise updates get messed up</li><li><code>cat /proc/cmdline</code> will dump the current kernel parameters</li><li><code>root=UUID=BLAH</code> or <code>root=PARTUUID=BLAH</code> is meant to be the <strong>arch</strong> root, not the <strong>boot</strong> partition<ul><li><code>volume</code> is the <strong>boot</strong> partition and should be set to <code>root=</code></li></ul></li></ul><h4 id=network-and-time>Network and Time</h4><p>Networking with <code>iwd</code> is very well <a href=https://wiki.archlinux.org/title/Iwd>described on the ArchWiki</a>, with the exception of its interaction with NetworkManager which essentially involves configuring it to use the IWD backend via <code>/etc/NetworkManager/NetworkManager.conf</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cfg data-lang=cfg><span class=line><span class=ln>1</span><span class=cl><span class=k>[device]</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=na>wifi.backend</span><span class=o>=</span><span class=s>iwd</span>
</span></span></code></pre></div><p>Now all that remains is to disable <code>wpa</code> and friends.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>systemctl stop wpa_supplicant
</span></span><span class=line><span class=ln>2</span><span class=cl>systemctl disable wpa_supplicant
</span></span><span class=line><span class=ln>3</span><span class=cl>systemctl start iwd
</span></span><span class=line><span class=ln>4</span><span class=cl>systemctl start NetworkManager
</span></span></code></pre></div><p>Personally I combine this the <a href=https://aur.archlinux.org/packages/networkmanager-dispatcher-chrony/>NetworkManager dispatcher script</a> for <code>chrony</code>.</p><h5 id=eduroam>Eduroam</h5><p>For the most part, auto configuration works. However, for <code>eduroam</code> I needed to setup <code>/var/lib/iwd/eduroam.8021x</code> with the following:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=ln>1</span><span class=cl><span class=p>[</span><span class=nx>Security</span><span class=p>]</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=nx>EAP-Method</span><span class=p>=</span><span class=nx>TTLS</span>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=nx>EAP-Identity</span><span class=p>=</span><span class=err>$</span><span class=nx>BLAH</span><span class=err>@</span><span class=nx>DOMAIN</span>
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=nx>EAP-TTLS-Phase2-Method</span><span class=p>=</span><span class=nx>MSCHAPV2</span>
</span></span><span class=line><span class=ln>5</span><span class=cl><span class=nx>EAP-TTLS-Phase2-Identity</span><span class=p>=</span><span class=err>$</span><span class=nx>BLAH</span><span class=err>@</span><span class=nx>DOMAIN</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>
</span></span><span class=line><span class=ln>7</span><span class=cl><span class=p>[</span><span class=nx>Settings</span><span class=p>]</span>
</span></span><span class=line><span class=ln>8</span><span class=cl><span class=nx>Autoconnect</span><span class=p>=</span><span class=kc>true</span>
</span></span></code></pre></div><p>With this <code>iwctl</code> works well enough:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>station wlan0 connect eduroam
</span></span></code></pre></div><h5 id=mobile-broadband>Mobile broadband</h5><p>The Fibocom L850-GL hardware can be setup via the experimental native xmm7360-pci driver. Unfortunately, upstream has not processed a couple of important pull requests. So using my fork:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>git clone git@github.com:HaoZeke/xmm7360-pci.git
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=nb>cd</span> xmm7360-pci
</span></span><span class=line><span class=ln>3</span><span class=cl>sudo /usr/bin/pip install --user pyroute2 ConfigArgParse
</span></span><span class=line><span class=ln>4</span><span class=cl>make <span class=o>&amp;&amp;</span> make load
</span></span><span class=line><span class=ln>5</span><span class=cl>make <span class=o>&amp;&amp;</span> make load <span class=c1># first one doesn&#39;t take</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>sudo /usr/bin/python rpc/open_xdatachannel.py --apn net.nova.is <span class=c1># or whatever your apn is</span>
</span></span></code></pre></div><p>To test that everything is working, a new device should have shown up with <code>ip addr</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>6: wwan0: &lt;POINTOPOINT,MULTICAST,NOARP,UP,LOWER_UP&gt; mtu <span class=m>1500</span> qdisc fq_codel state UNKNOWN group default qlen <span class=m>1000</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>    link/none
</span></span></code></pre></div><p>It should have some <code>inet</code> addresses as well. Unfortunately, the steps above need to be run every time, so whenever needed:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>make <span class=o>&amp;&amp;</span> make load
</span></span><span class=line><span class=ln>2</span><span class=cl>make <span class=o>&amp;&amp;</span> make load <span class=c1># first one doesn&#39;t take</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>sudo /usr/bin/python rpc/open_xdatachannel.py --apn net.nova.is
</span></span></code></pre></div><h4 id=audio>Audio</h4><p>As <a href=https://grimoire.science/working-with-wayland-and-sway/>discussed earlier</a>, no special requirements need to be considered beyond
setting up <code>/etc/libao.conf</code> which in itself is only needed for <a href=https://github.com/PromyLOPh/pianobar>pianobar</a>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln>1</span><span class=cl>default_drive=pulse
</span></span><span class=line><span class=ln>2</span><span class=cl># dev=default
</span></span><span class=line><span class=ln>3</span><span class=cl>quiet
</span></span></code></pre></div><p>Actually this also holds true for <code>pipewire</code> and that&rsquo;s pretty much what I
decided to go with this time around.</p><h4 id=snap-and-apparmor>Snap and AppArmor</h4><p>In general, it seems that <code>snap</code> packages have better support for <code>wayland</code>,
like for Telegram. Setting this up involves working out <code>apparmor</code> as well via
the kernel parameters. However, for me and <a href="https://forum.peppermintos.com/index.php?topic=4338.0">some other people</a> apparently,
enabling <code>apparmor.service</code> corresponds to taking a few seconds of added boot
time. Unacceptable for me at any rate. So no <code>snapd</code> either.</p><p>Flatpak uses namespaces, but honestly on an ArchLinux machine it is always
better to just build things.</p><h4 id=intel-graphics>Intel graphics</h4><p>Following along the <a href=https://wiki.archlinux.org/title/Intel_graphics#Enable_GuC_/_HuC_firmware_loading>standard wiki page</a>, I ended up setting <code>fastboot</code> and <code>enable_fbc</code>, verified with:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>sudo systool -m i915 -av
</span></span></code></pre></div><p>The settings can be passed through a kernel parameter or more simply via:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl><span class=c1># sudoedit /etc/modprobe.d/i915.conf</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>options i915 <span class=nv>enable_fbc</span><span class=o>=</span><span class=m>1</span> <span class=nv>fastboot</span><span class=o>=</span><span class=m>1</span> <span class=nv>intel_iommu</span><span class=o>=</span>on,igfx_off
</span></span></code></pre></div><h2 id=window-session-management>Window / Session Management</h2><p>Window and session managers are not exactly a dime a dozen. The X window system
has served me well for many many years yet, for this post, of the X window
system, the <a href=https://www.x.org/archive/X11R6.8.0/doc/xorg.conf.5.html#sect8>less said the better</a>. Wayland on the other hand, is fast, shiny, and
doesn&rsquo;t as yet have <a href=https://www.explainxkcd.com/wiki/index.php/963:_X11>233 configuration flags</a>.</p><h2 id=sway-basics>Sway basics</h2><p><code>Weston</code> remains the reference implementation, and GNOME has continued
championing the cause of Wayland which is great. However, since my foray
in 2018; tiling window managers have come a long way. Migrating away from the
MacOS&rsquo; &ldquo;tiling managers&rdquo; was seamless and very reminsicent of my older <code>i3-gaps</code>
setup.</p><h3 id=high-dpi>High DPI</h3><p>An interesting quirk of <code>sway</code> is that Hi-DPI support is still <a href=https://github.com/swaywm/wlroots/pull/2064#issuecomment-622647075>at the draft
stage</a>. For the most part this is becoming a non-issue as more applications
support Wayland out of the box, or at-least optionally.</p><p>However, certain applications are unusable without the HiDPI support patches,
including most <code>java</code> packages like <code>cryptomator</code>. Thus it is best to grab the
modified versions and configure them.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>trizen -S sway-hidpi-git wlroots-hidpi-git xorg-xwayland-hidpi-git
</span></span></code></pre></div><p>Note that by default <code>sway</code> supports fractional scaling too via, <code>swaymsg output $MON scale 1.5</code> and also when in the configuration. However, the patches are
required for <code>xwayland force scale 2</code> and sundry commands.</p><blockquote><p>This turned out to be a dead end, even though it worked reasonably well, the scaling of icons was messy and it still necessitated a set of environment variables for Desktop entries</p></blockquote><h3 id=display-management>Display management</h3><p>A Reddit user <code>WhyNotHugo</code>, has an excellent <a href="https://www.reddit.com/r/swaywm/comments/qiz4aa/comment/hin41hg/?utm_source=share&amp;utm_medium=web2x&amp;context=3">line of reasoning</a> for why a display
manager is needed, rephrased to be:</p><ul><li>Enough system users / applications expect the existence of a <code>display-manager</code> including <code>systemd-logind</code> and <code>plymouth</code></li><li>No special handling needs to be done to ensure only <code>tty1</code> spawns a graphical session</li><li>The DM is meant to ensure that window manager crashes don&rsquo;t yield an unlocked desktop</li></ul><p>Anyway, the basic <code>agreety</code> should suffice for the most part; though a more
pleasant setup is with <code>greetd-tuigreet</code>.</p><p>More importantly, the session itself should include the appropriate environment
variables as <a href=https://man.sr.ht/~kennylevinsen/greetd/#how-to-set-xdg_session_typewayland>described here</a> and reproduced below. Essentially this involves using a runner script, <code>/usr/local/bin/sway-run.sh</code> which ensures the correct variables are setup.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln> 1</span><span class=cl><span class=cp>#!/bin/sh
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=cp></span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=c1># Session</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=nb>export</span> <span class=nv>XDG_SESSION_TYPE</span><span class=o>=</span>wayland
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=nb>export</span> <span class=nv>XDG_SESSION_DESKTOP</span><span class=o>=</span>sway
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=nb>export</span> <span class=nv>XDG_CURRENT_DESKTOP</span><span class=o>=</span>sway
</span></span><span class=line><span class=ln> 7</span><span class=cl>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=nb>source</span> /usr/local/bin/wayland_enablement.sh
</span></span><span class=line><span class=ln> 9</span><span class=cl>
</span></span><span class=line><span class=ln>10</span><span class=cl>systemd-cat --identifier<span class=o>=</span>sway sway <span class=nv>$@</span>
</span></span></code></pre></div><p>Where the sourced file is:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln> 1</span><span class=cl><span class=cp>#!/bin/sh
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=cp></span><span class=nb>export</span> <span class=nv>GDK_BACKEND</span><span class=o>=</span>wayland,x11
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=nb>export</span> <span class=nv>MOZ_ENABLE_WAYLAND</span><span class=o>=</span><span class=m>1</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=nb>export</span> <span class=nv>CLUTTER_BACKEND</span><span class=o>=</span>wayland
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=nb>export</span> <span class=nv>QT_QPA_PLATFORM</span><span class=o>=</span>wayland-egl
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=nb>export</span> <span class=nv>ECORE_EVAS_ENGINE</span><span class=o>=</span>wayland-egl
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=nb>export</span> <span class=nv>ELM_ENGINE</span><span class=o>=</span>wayland_egl
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=nb>export</span> <span class=nv>SDL_VIDEODRIVER</span><span class=o>=</span>wayland
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=nb>export</span> <span class=nv>_JAVA_AWT_WM_NONREPARENTING</span><span class=o>=</span><span class=m>1</span>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=nb>export</span> <span class=nv>NO_AT_BRIDGE</span><span class=o>=</span><span class=m>1</span>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=nb>export</span> <span class=nv>BEMENU_BACKEND</span><span class=o>=</span>wayland
</span></span></code></pre></div><p>Now instead of using <code>tuigreet --cmd sway</code> in <code>/etc/greetd/config.toml</code> we can
use <code>sway-run</code> as the <code>cmd</code>.</p><p>It is important to optionally provide <code>GDK_BACKEND</code> with a fallback option
otherwise <code>zotero</code> and others might fail with <code>Error: cannot open display: :0</code>.</p><p>This still breaks for a bunch of special cases for which I went with a
specialized <code>desktop</code> file in <code>$HOME/.local/share/applications/BLAH</code>. For example, consider the <code>enpass</code> file (since it only supports <code>xcb</code>):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl><span class=o>[</span>Desktop Entry<span class=o>]</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=nv>Type</span><span class=o>=</span>Application
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=nv>Name</span><span class=o>=</span>Enpass XCB
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=nv>Exec</span><span class=o>=</span>env <span class=nv>QT_QPA_PLATFORM</span><span class=o>=</span>xcb <span class=nv>QT_SCALE_FACTOR</span><span class=o>=</span><span class=m>2</span> enpass
</span></span><span class=line><span class=ln>5</span><span class=cl><span class=nv>Icon</span><span class=o>=</span>enpass
</span></span></code></pre></div><p>However, this is still not ideal.</p><h2 id=xwayland-proxies>XWayland proxies</h2><p>Rather than work with the patched <code>sway</code> and <code>wlroots</code> packages, a recent
approach by <a href="https://roscidus.com/blog/blog/2021/10/30/xwayland/?utm_source=pocket_mylist">Thomas Leonard</a> based on isolating the XWayland setup works a lot
better for high DPI screens and systems. There are some caveats and still
requires modified desktop files, but it works a lot better and has fewer bugs
than the standard XWayland setup with <code>sway</code>. However, <code>xlsclients</code> does not
track the X11 applications started in the manner described here.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>git clone https://github.com/talex5/wayland-proxy-virtwl.git
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=nb>cd</span> wayland-proxy-virtwl
</span></span><span class=line><span class=ln>3</span><span class=cl>opam install .
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=c1># Installs to $HOME/.opam/default/bin/wayland-proxy-virtwl</span>
</span></span></code></pre></div><p>For my system, the corresponding service required both a change in DPI, and the &ldquo;unscaling&rdquo;.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl><span class=o>[</span>Unit<span class=o>]</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=nv>Description</span><span class=o>=</span>Wayland-proxy-virtwl
</span></span><span class=line><span class=ln>3</span><span class=cl>
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=o>[</span>Service<span class=o>]</span>
</span></span><span class=line><span class=ln>5</span><span class=cl><span class=nv>ExecStart</span><span class=o>=</span>/home/<span class=nv>$USER</span>/.opam/default/bin/wayland-proxy-virtwl --tag<span class=o>=</span><span class=s2>&#34;[my-vm] &#34;</span> --wayland-display wayland-0 --x-display<span class=o>=</span><span class=m>0</span> --xrdb Xft.dpi:150 --x-unscale<span class=o>=</span><span class=m>2</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>
</span></span><span class=line><span class=ln>7</span><span class=cl><span class=o>[</span>Install<span class=o>]</span>
</span></span><span class=line><span class=ln>8</span><span class=cl><span class=nv>WantedBy</span><span class=o>=</span>default.target
</span></span></code></pre></div><p>Note that the service needs the full path, not the censored one in the snippet. Now any subsequent X11 applications can be used via:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>systemctl restart --user wayland-proxy-virtwl.service
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=nv>DISPLAY</span><span class=o>=</span><span class=s2>&#34;:0&#34;</span>  <span class=nv>WAYLAND_DISPLAY</span><span class=o>=</span><span class=s2>&#34;wayland-1&#34;</span> <span class=nv>QT_QPA_PLATFORM</span><span class=o>=</span>xcb <span class=nv>QT_SCALE_FACTOR</span><span class=o>=</span>1.5 enpass
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=nv>DISPLAY</span><span class=o>=</span><span class=s2>&#34;:0&#34;</span> <span class=nv>GDK_BACKEND</span><span class=o>=</span><span class=s2>&#34;x11&#34;</span>  <span class=nv>WAYLAND_DISPLAY</span><span class=o>=</span><span class=s2>&#34;wayland-1&#34;</span> gvim
</span></span></code></pre></div><p>When things work out, then the applications will have <code>[my-vm]</code> in the window title. This still requires that <code>xorg-xwayland</code> be installed, and in some situations it needs to be restarted, but by and large this is a seamless setup.</p><h2 id=miscellaneous>Miscellaneous</h2><h3 id=terminal-emulators>Terminal Emulators</h3><p>Though <code>kitty</code> and a few other stalwarts do support <code>wayland</code>, foot seems to be
the fastest, especially since it has a server client mode much like <code>emacs</code> with
<code>foot -s</code> and <code>footclient</code>.</p><h3 id=screenshots>Screenshots</h3><p><code>slurm</code> and <code>grim</code> still function well together, making this mostly painless.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>slurp <span class=p>|</span> grim -g - - <span class=p>|</span> wl-copy
</span></span></code></pre></div><p>Typically this is bound to <code>WIN+O</code> for me.</p><h3 id=screen-recorders>Screen Recorders</h3><p>Unfortunately, the <code>zoom</code> desktop client <a href=https://github.com/swaywm/sway/issues/4358>does not support</a> <code>sway</code> which is
problematic. However, with pipewire setup, Firefox passes the <a href=https://mozilla.github.io/webrtc-landing/gum_test.html>gUM test</a> for
screen-sharing which is good enough. For recording stuff, OBS has a plugin, but
<a href=https://github.com/foxcpp/ssr-wlroots>simplescreenrecorder has a fork</a> which works out of the box, with XWayland
required for the UI though.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>trizen -S simplescreenrecorder-wlroots-git
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=nv>DISPLAY</span><span class=o>=</span><span class=s2>&#34;:0&#34;</span>  <span class=nv>WAYLAND_DISPLAY</span><span class=o>=</span><span class=s2>&#34;wayland-1&#34;</span> simplescreenrecorder
</span></span></code></pre></div><h3 id=reference-management>Reference Management</h3><p>I&rsquo;ve been a <code>zotero</code> user for many years now, however it suffers from the same
UI scaling issues and cannot be fixed either by forcing <code>xwayland</code> execution nor
by trying other scaling methods. The last resort is to set up a <code>user.js</code> file in <code>$HOME/.zotero/zotero/$PROFILE/user.js</code> with:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=ln>1</span><span class=cl><span class=nx>user_pref</span><span class=p>(</span><span class=s1>&#39;layout.css.devPixelsPerPx&#39;</span><span class=p>,</span> <span class=s1>&#39;2&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=nx>user_pref</span><span class=p>(</span><span class=s2>&#34;extensions.zotero.fontSize&#34;</span><span class=p>,</span> <span class=s2>&#34;0.3&#34;</span><span class=p>);</span>
</span></span></code></pre></div><p>With this, the toolbar text is still too large, as are all the preference text elements, however it is still moderately usable.</p><p>Somehow this does conflict and error out with the proxied XWayland, but the regular settings work alright.</p><h3 id=mail-clients>Mail Clients</h3><p>The mail client story is increasingly complicated on Linux machines in general.
Since Thunderbird tanked with XUL ecosystem eons ago there haven&rsquo;t been many
contenders. Given the situation with window management, a <code>localserver</code> approach
to web-clients like Mailpile <sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup> would have been perfect&mldr; Except it
is still based around <code>python2</code> and shows no sign of moving forward. I really
<a href=/posts/reclaim-email-astroid/>like Astroid</a>, but it doesn&rsquo;t seem to have been updated in a while either. Thunderbird works fine too, and does not require XWayland which is a plus point.</p><h3 id=electron>Electron</h3><p>Anything with a recent electron binary (around 13) will just need a few flags.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>code --enable-features<span class=o>=</span>UseOzonePlatform --ozone-platform<span class=o>=</span>wayland
</span></span><span class=line><span class=ln>2</span><span class=cl>obsidian --enable-features<span class=o>=</span>UseOzonePlatform --ozone-platform<span class=o>=</span>wayland
</span></span></code></pre></div><h3 id=browsers>Browsers</h3><p>Personally I prefer <code>firefox</code> in-spite of its shitty tendencies on the regular editions (e.g. not allowing unsigned extensions).</p><h4 id=firefox>Firefox</h4><p>Firefox&rsquo;s <code>wayland</code> build on the AUR remains a nightmare to compile and work
with. The developer version can leverage the <code>MOZ_ENABLE_WAYLAND=1</code> to get
reasonably good results.</p><h4 id=chrome>Chrome</h4><p>As of this post the stable branch of <code>google-chrome</code> does indeed support Wayland with a switch:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>google-chrome-stable --enable-features<span class=o>=</span>UseOzonePlatform --ozone-platform<span class=o>=</span>wayland
</span></span></code></pre></div><p>The stable branch is rather boring anyway, on Arch Linux atleast, the launchers support <code>$XDG_CONFIG_HOME/chrome-dev-flags.conf</code> or its equivalents.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cfg data-lang=cfg><span class=line><span class=ln>1</span><span class=cl><span class=na>--enable-features</span><span class=o>=</span><span class=s>UseOzonePlatform</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=na>--ozone-platform</span><span class=o>=</span><span class=s>wayland</span>
</span></span></code></pre></div><h3 id=rstudio>RStudio</h3><p>No <code>wayland</code> support. Needs to be forced into <code>xwayland</code> and have the fonts scaled via:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl><span class=c1># For the hidpi setup</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=nv>Exec</span><span class=o>=</span>env <span class=nv>WAYLAND_DISPLAY</span><span class=o>=</span> <span class=nv>QT_SCALE_FACTOR</span><span class=o>=</span><span class=m>2</span> /usr/bin/rstudio-bin %F
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=c1># Or with the proxied xwayland</span>
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=nv>DISPLAY</span><span class=o>=</span><span class=s2>&#34;:0&#34;</span>  <span class=nv>WAYLAND_DISPLAY</span><span class=o>=</span><span class=s2>&#34;wayland-1&#34;</span> <span class=nv>QT_SCALE_FACTOR</span><span class=o>=</span><span class=m>2</span> <span class=nv>QT_QPA_PLATFORM</span><span class=o>=</span>xcb /usr/bin/rstudio-bin
</span></span></code></pre></div><h2 id=conclusions>Conclusions</h2><p>Things have definitely improved in three years, however the overall aggravation
and microaggressions which come with working around window manager issues seem
to be too high a price for the potential battery / quality of life savings. In
particular, as before, forcing programs to run in <code>xwayland</code> makes them
effectively worse than their <code>x11</code> counterparts and requires far more
maintenance load. It seems likely then, that in-spite of great progress it is
still probably best to stick to X11; especially for new users who might not
immediately suspect the display server as a source of buggy UX elements (or
screen-sharing woes).</p><p>Though the conclusions above are still valid, with the XWayland fixes, this is definitely viable and will remain my daily driver.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>This precludes any actual tasks I have, naturally, the color of the bike shed and the wool of a Llama take precedence&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>Naturally I haven&rsquo;t really taken time to dive into why, as evidenced by the many many many adjectives&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>A good initial set of thoughts on this are provided by <a href=https://emeraldreverie.org/2018/10/03/first-impressions-of-mailpile/>this post</a>&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div></article><hr><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=/tags/rambling>rambling</a></span><span class=tag><a href=/tags/workflow>workflow</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>2215 Words</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Posted: <time class=dt-published>2021-12-24 18:13 +0000</time></p><a class=resp-sharing-button__link href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2frgoswami.me%2fposts%2frevisiting-wayland-2021-archlinux%2f" target=_blank rel=noopener aria-label=Facebook><div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--medium"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--circle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="11.5"/><path d="M15.84 9.5H13.5V8.48c0-.53.35-.65.6-.65h1.4v-2.3h-2.35c-2.3.0-2.65 1.7-2.65 2.8V9.5h-2v2h2v7h3v-7h2.1l.24-2z"/></svg></div>Facebook</div></a><a class=resp-sharing-button__link href="https://twitter.com/intent/tweet/?text=%22Revisiting%20Wayland%20for%20ArchLinux%22%20seems%20like%20an%20interesting%20read%20from%20%40rg0swami&amp;url=https%3a%2f%2frgoswami.me%2fposts%2frevisiting-wayland-2021-archlinux%2f" target=_blank rel=noopener aria-label=Twitter><div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--medium"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--circle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.5 7.4l-2 .2c-.4-.5-1-.8-2-.8C13.3 6.8 12 8 12 9.4v.6c-2 0-4-1-5.4-2.7-.2.4-.3.8-.3 1.3.0 1 .4 1.7 1.2 2.2-.5.0-1 0-1.2-.3.0 1.3 1 2.3 2 2.6-.3.4-.7.4-1 0 .2 1.4 1.2 2 2.3 2-1 1-2.5 1.4-4 1 1.3 1 2.7 1.4 4.2 1.4 4.8.0 7.5-4 7.5-7.5v-.4c.5-.4.8-1.5 1.2-2z"/><circle cx="12" cy="12" r="11.5"/></svg></div>Twitter</div></a><a class=resp-sharing-button__link href="mailto:?subject=%22Revisiting%20Wayland%20for%20ArchLinux%22%20seems%20interesting...&amp;body=https%3a%2f%2frgoswami.me%2fposts%2frevisiting-wayland-2021-archlinux%2f" target=_self rel=noopener aria-label=E-Mail><div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--medium"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--circle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.5 16c0 .8-.7 1.5-1.5 1.5H6c-.8.0-1.5-.7-1.5-1.5V8c0-.8.7-1.5 1.5-1.5h12c.8.0 1.5.7 1.5 1.5v8zm-2-7.5L12 13 6.5 8.5m11 6-4-2.5m-7 2.5 4-2.5"/><circle cx="12" cy="12" r="11.5"/></svg></div>E-Mail</div></a><a class=resp-sharing-button__link href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2frgoswami.me%2fposts%2frevisiting-wayland-2021-archlinux%2f&amp;title=%22Revisiting%20Wayland%20for%20ArchLinux%22%20seems%20interesting...&amp;summary=%22Revisiting%20Wayland%20for%20ArchLinux%22%20seems%20interesting...&amp;source=https%3a%2f%2frgoswami.me%2fposts%2frevisiting-wayland-2021-archlinux%2f" target=_blank rel=noopener aria-label=LinkedIn><div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--medium"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--circle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="11.5"/><path d="M15 12.5c-.28.0-.5.22-.5.5v3.5h-3s.03-6.48.0-7h3v.83s.46-.75 1.7-.75c1.56.0 2.3 1.12 2.3 3.3v3.62h-3V13c0-.28-.23-.5-.5-.5zm-7.5-3h2v7h-2z"/><circle cx="8.5" cy="6.5" r="1"/></svg></div>LinkedIn</div></a><a class=resp-sharing-button__link href="https://reddit.com/submit/?url=https%3a%2f%2frgoswami.me%2fposts%2frevisiting-wayland-2021-archlinux%2f&amp;resubmit=true&amp;title=%22Revisiting%20Wayland%20for%20ArchLinux%22%20seems%20interesting..." target=_blank rel=noopener aria-label=Reddit><div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--medium"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--circle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="11.5"/><ellipse cx="12" cy="14.37" rx="6.2" ry="4.24"/><path d="M14.3 16.25c-.62.36-1.42.57-2.3.57s-1.7-.2-2.32-.58"/><circle cx="14.61" cy="13.39" r=".98"/><circle cx="9.39" cy="13.39" r=".98"/><path d="M16.4 11.38c.26-.55.82-.92 1.47-.92.9.0 1.63.73 1.63 1.63.0.8-.6 1.47-1.38 1.6"/><circle cx="17.22" cy="7.52" r="1.63"/><path d="M7.6 11.38c-.26-.54-.82-.92-1.47-.92-.9.0-1.63.73-1.63 1.63.0.8.6 1.47 1.38 1.6M12 10.12s-.08-4.82 3.6-2.6"/></svg></div>Reddit</div></a><a class=resp-sharing-button__link href="whatsapp://send?text=%22Revisiting%20Wayland%20for%20ArchLinux%22%20seems%20interesting...%20https%3a%2f%2frgoswami.me%2fposts%2frevisiting-wayland-2021-archlinux%2f" target=_blank rel=noopener aria-label=WhatsApp><div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--medium"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--circle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle xmlns="http://www.w3.org/2000/svg" cx="12" cy="12" r="11.5"/><path stroke-width="1" d="M17.6 6.2c-1.5-1.5-3.4-2.3-5.5-2.3-4.3.0-7.8 3.5-7.8 7.8.0 1.4.4 2.7 1 3.9l-1.1 4 4.1-1.1c1.1.6 2.4.9 3.7.9 4.3.0 7.8-3.5 7.8-7.8.1-2-.7-3.9-2.2-5.4zm-5.5 11.9c-1.2.0-2.3-.3-3.3-.9l-.2-.1-2.4.6.7-2.4-.2-.2c-.6-1-1-2.2-1-3.4.0-3.6 2.9-6.5 6.5-6.5 1.7.0 3.3.7 4.6 1.9 1.2 1.2 1.9 2.8 1.9 4.6-.1 3.5-3 6.4-6.6 6.4zm3.5-4.8c-.2-.1-1.1-.6-1.3-.6-.2-.1-.3-.1-.4.1s-.5.6-.6.8c-.1.1-.2.1-.4.0s-.8-.3-1.6-1c-.6-.5-1-1.2-1.1-1.3-.1-.2.0-.3.1-.4l.3-.3s.1-.2.2-.3c.1-.1.0-.2.0-.3s-.4-1.1-.6-1.4c-.2-.4-.3-.3-.4-.3h-.4s-.3.0-.5.2-.7.7-.7 1.6c0 1 .7 1.9.8 2s1.4 2.1 3.3 2.9c.5.2.8.3 1.1.4.5.1.9.1 1.2.1.4-.1 1.1-.5 1.3-.9.2-.5.2-.8.1-.9.0-.2-.2-.3-.4-.4z"/></svg></div>WhatsApp</div></a></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://rgoswami.me/posts/tinyssh-dockerdev-env/><span class=button__icon>←</span>
<span class=button__text>TinySSH for Docker Development Environments</span>
</a></span><span class="button next"><a href=https://rgoswami.me/posts/iso-c-type-bound-fortran/><span class=button__text>Exploring ISO_C_BINDING and type-bound procedures</span>
<span class=button__icon>→</span></a></span></div></div><div id=comments class=thin><div class=pagination__title><span class=pagination__title-h>Comments</span><hr></div><script src=https://utteranc.es/client.js repo=haozeke/haozeke.github.io issue-term=pathname theme=photon-dark label="Utterance 💬" crossorigin=anonymous async></script></div></main><footer class=footer><p>&copy; 2023
<span><a href=https://rgoswami.me/>Rohit Goswami (HaoZeke)</a></span>
<a href=/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a><br><a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a>.
Powered by <a href=http://gohugo.io><u>Hugo</u></a> and <a href=https://github.com/HaoZeke/hugo-theme-hello-friend-ng-hz><u>this theme</u></a>.</br>Hosted with <u><a href=https://www.netlify.com/>Netlify</a></u>.</br><script src=https://liberapay.com/rohit/widgets/button.js></script><noscript><a href=https://liberapay.com/rohit/donate><img alt="Donate using Liberapay" src=https://liberapay.com/assets/widgets/donate.svg></a></noscript></p></footer></div><script src=/bundle.min.5fae9992ea406007408dc33b0b3a8376d61e2f1d6ac50ba1dad7580ac50afb5199bcef3bbc3677e77553a9980bf882cf71edc2f755687dd7725f12ece4304ac2.js></script><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-109503488-16","auto"),ga("send","pageview")</script><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","3z2xvwqu4u")</script><script data-goatcounter=https://rgoswami.goatcounter.com/count async src=//gc.zgo.at/count.js></script><script>var clicky_site_ids=clicky_site_ids||[];clicky_site_ids.push("101265002")</script><script async src=https://static.getclicky.com/js></script><script src=https://cdn.jsdelivr.net/npm/readmore-js@3.0.0-beta-1/dist/readmore.min.js></script><script src=/js/codefold.min.f0790269b87613b3bcff64022840fe1991eee3ea384e874c78a24022c9936bd888a3c14a05a10955881eebb1558e4fcf37576dac120cd0bf4ebaf7aca27b35b1.js></script><script src=/js/copyClipboard.min.1c92539aea398296101add0e80508ad94cb59fb37f946f06ec9ca1c7558a961b8de0c5595a921aed70aa91eb94d24db35e5a01243bc625f8b1814b17928f478b.js></script></body></html>